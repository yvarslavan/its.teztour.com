# –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é Flask –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Red Hat —Å–µ—Ä–≤–µ—Ä

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

1. **REDHAT_DEPLOYMENT_GUIDE.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
2. **.gitlab-ci-redhat.yml** - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π CI/CD pipeline –¥–ª—è Red Hat
3. **flask-helpdesk.service.redhat** - Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è Red Hat
4. **flask-helpdesk.nginx.conf** - Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è its.tez-tour.com
5. **setup-redhat-server.sh** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 —à–∞–≥–æ–≤)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SSH –∫–ª—é—á–µ–π
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
ssh-keygen -t rsa -b 4096 -C "gitlab-ci-deploy" -f ~/.ssh/flask_helpdesk_deploy
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Red Hat —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ù–∞ Red Hat —Å–µ—Ä–≤–µ—Ä–µ (–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å sudo –ø—Ä–∞–≤–∞–º–∏)
wget https://your-repo/setup-redhat-server.sh
chmod +x setup-redhat-server.sh
./setup-redhat-server.sh
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ SSH –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cat >> /home/deploy/.ssh/authorized_keys << 'EOF'
# –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ~/.ssh/flask_helpdesk_deploy.pub
EOF
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitLab CI/CD –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
–í GitLab: `–ü—Ä–æ–µ–∫—Ç -> Settings -> CI/CD -> Variables`

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------------|----------|
| `SSH_PRIVATE_KEY` | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `~/.ssh/flask_helpdesk_deploy` |
| `DEPLOY_SERVER` | IP –∞–¥—Ä–µ—Å Red Hat —Å–µ—Ä–≤–µ—Ä–∞ |
| `DEPLOY_USER` | `deploy` |
| `DEPLOY_DOMAIN` | `its.tez-tour.com` |

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cp .gitlab-ci-redhat.yml .gitlab-ci.yml
# –§–∞–π–ª—ã flask-helpdesk.service.redhat –∏ flask-helpdesk.nginx.conf —É–∂–µ –≥–æ—Ç–æ–≤—ã
```

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—É—Ç–∏
- **–°—Ç–∞—Ä—ã–π**: `/var/www/flask_helpdesk`
- **–ù–æ–≤—ã–π**: `/opt/www`

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–°—Ç–∞—Ä—ã–π**: `www-data`
- **–ù–æ–≤—ã–π**: `deploy`

### –î–æ–º–µ–Ω
- **–°—Ç–∞—Ä—ã–π**: –Ω–µ —É–∫–∞–∑–∞–Ω
- **–ù–æ–≤—ã–π**: `its.tez-tour.com`

### –°–∏—Å—Ç–µ–º–∞
- **–°—Ç–∞—Ä–∞—è**: Ubuntu/Debian (apt)
- **–ù–æ–≤–∞—è**: Red Hat (dnf)

## üîß –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Red Hat

1. **SELinux** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è
2. **Firewall** - –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 80, 443, 22
3. **Systemd** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ ExecStartPre –¥–∏—Ä–µ–∫—Ç–∏–≤—ã
4. **Nginx** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Let's Encrypt
2. **DNS –∑–∞–ø–∏—Å—å** –¥–ª—è `its.tez-tour.com` –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
3. **–ë—ç–∫–∞–ø—ã** —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `/opt/backups/flask_helpdesk`
4. **–õ–æ–≥–∏** –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `journalctl -u flask-helpdesk -f`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
systemctl status flask-helpdesk
systemctl status nginx
curl -I http://localhost/
curl -I https://its.tez-tour.com/
```

## üÜò –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Problem: SELinux –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```bash
sudo setsebool -P httpd_can_network_connect on
sudo setsebool -P httpd_execmem on
```

### Problem: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–∫–µ—Ç—É
```bash
sudo chown deploy:nginx /run/gunicorn/
sudo chmod 775 /run/gunicorn/
```

### Problem: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
sudo certbot --nginx -d its.tez-tour.com
```

### Problem: –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å SSH –∫–ª—é—á
```bash
sudo nano /home/deploy/.ssh/authorized_keys
# –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- –õ–æ–≥–∏ pipeline: GitLab CI/CD -> Pipelines
- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: `journalctl -u flask-helpdesk -f`
- –°—Ç–∞—Ç—É—Å: `systemctl status flask-helpdesk nginx`

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] SSH –∫–ª—é—á–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–∫—Ä–∏–ø—Ç–æ–º setup-redhat-server.sh
- [ ] DNS –∑–∞–ø–∏—Å—å –¥–ª—è its.tez-tour.com –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ GitLab CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –§–∞–π–ª .gitlab-ci.yml –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] Pipeline –∑–∞–ø—É—â–µ–Ω –∏ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://its.tez-tour.com/
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~30-60 –º–∏–Ω—É—Ç
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: Sudo –¥–æ—Å—Ç—É–ø –∫ Red Hat —Å–µ—Ä–≤–µ—Ä—É, GitLab —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

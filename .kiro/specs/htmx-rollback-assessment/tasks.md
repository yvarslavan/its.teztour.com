# План задач: Откат HTMX интеграции

## Статус выполнения
- [x] 1. Подготовительные работы


- [x] 2. Удаление HTMX файлов


- [x] 3. Очистка маршрутов


- [x] 4. Удаление зависимостей


- [-] 5. Тестирование и верификация


## Детальный план

### 1. Подготовительные работы
**Время:** 5 минут
**Приоритет:** Критический

#### Подзадачи:
- [x] 1.1 Создать резервную копию проекта

  - Создать git commit с текущим состоянием
  - Убедиться, что все изменения зафиксированы
  - _Требования: Безопасность данных_

- [x] 1.2 Проверить текущую работоспособность

  - Запустить приложение
  - Проверить основные маршруты
  - Убедиться в отсутствии критических ошибок
  - _Требования: Базовая функциональность_

- [x] 1.3 Документировать текущее состояние

  - Зафиксировать список HTMX файлов
  - Записать версии зависимостей
  - _Требования: Отслеживаемость изменений_

### 2. Удаление HTMX файлов
**Время:** 10 минут
**Приоритет:** Высокий

#### Подзадачи:
- [x] 2.1 Удалить основной HTMX модуль

  - Удалить файл `blog/utils/htmx_helpers.py`
  - Проверить отсутствие импортов этого модуля в других файлах
  - _Требования: Полное удаление HTMX утилит_

- [x] 2.2 Удалить HTMX шаблоны

  - Удалить `blog/templates/htmx_test.html`
  - Удалить `blog/templates/partials/htmx_test_partial.html`
  - Удалить `blog/templates/partials/htmx_test_data.html`
  - Удалить `blog/templates/errors/htmx_error.html`
  - _Требования: Очистка шаблонов от HTMX_

- [x] 2.3 Проверить отсутствие ссылок на удаленные файлы

  - Поиск упоминаний удаленных шаблонов в коде
  - Проверка маршрутов на ссылки на несуществующие шаблоны
  - _Требования: Предотвращение ошибок 404_

### 3. Очистка маршрутов
**Время:** 15 минут
**Приоритет:** Высокий

#### Подзадачи:
- [x] 3.1 Удалить HTMX маршруты из blog/tasks/routes.py

  - Удалить маршрут `/htmx-test` (функция `htmx_test_page`)
  - Удалить маршрут `/htmx-test-endpoint` (функция `htmx_test_endpoint_handler`)
  - Удалить маршрут `/htmx-test-data` (функция `htmx_test_data_handler`)
  - Удалить маршрут `/htmx-error-test` (функция `htmx_error_test_handler`)
  - _Требования: Удаление всех HTMX endpoints_

- [x] 3.2 Очистить импорты и комментарии

  - Удалить HTMX-связанные импорты
  - Удалить комментарии "===== HTMX TESTING ROUTES ====="
  - Очистить неиспользуемые переменные
  - _Требования: Чистота кода_

- [x] 3.3 Проверить синтаксис после изменений

  - Проверить корректность Python синтаксиса
  - Убедиться в отсутствии неразрешенных импортов
  - _Требования: Работоспособность кода_

### 4. Удаление зависимостей
**Время:** 5 минут
**Приоритет:** Средний

#### Подзадачи:

- [ ] 4.1 Удалить flask-htmx из requirements.txt
  - Найти строку `flask-htmx==0.4.0`
  - Удалить строку из файла requirements.txt
  - _Требования: Очистка зависимостей_


- [ ] 4.2 Деинсталлировать пакет
  - Выполнить `pip uninstall flask-htmx`
  - Подтвердить удаление пакета

  - _Требования: Очистка окружения_

- [ ] 4.3 Обновить виртуальное окружение
  - Переустановить зависимости из обновленного requirements.txt
  - Проверить отсутствие конфликтов
  - _Требования: Стабильность окружения_

### 5. Тестирование и верификация
**Время:** 15-30 минут
**Приоритет:** Критический

#### Подзадачи:
- [x] 5.1 Запуск приложения

  - Запустить Flask приложение
  - Проверить отсутствие ошибок при старте
  - Убедиться в корректной загрузке всех модулей
  - _Требования: Работоспособность приложения_


- [ ] 5.2 Тестирование основной функциональности
  - Проверить авторизацию пользователей
  - Проверить основные страницы (профиль, задачи, уведомления)
  - Проверить работу форм и CRUD операций
  - _Требования: Сохранение основной функциональности_


- [ ] 5.3 Проверка отсутствия HTMX следов
  - Убедиться, что HTMX маршруты недоступны (404)
  - Проверить отсутствие HTMX атрибутов в HTML
  - Проверить логи на отсутствие HTMX ошибок
  - _Требования: Полное удаление HTMX_

- [ ] 5.4 Финальная верификация
  - Выполнить полный цикл тестирования пользователя
  - Проверить производительность приложения
  - Создать итоговый git commit с результатами отката
  - _Требования: Подтверждение успешного отката_

## Критерии завершения

### Обязательные критерии:
- ✅ Все HTMX файлы удалены
- ✅ Все HTMX маршруты удалены
- ✅ Зависимость flask-htmx удалена
- ✅ Приложение запускается без ошибок
- ✅ Основная функциональность работает

### Дополнительные критерии:
- ✅ Отсутствуют упоминания HTMX в коде
- ✅ Логи не содержат HTMX ошибок
- ✅ Производительность не ухудшилась

## План отката (если что-то пойдет не так)

1. **Немедленный откат:** `git reset --hard HEAD~1`
2. **Восстановление зависимостей:** `pip install -r requirements.txt`
3. **Перезапуск приложения:** Проверить работоспособность

## Примечания

- Все изменения должны быть зафиксированы в git
- При возникновении проблем - немедленно остановить процесс
- Рекомендуется выполнять откат в нерабочее время
- После завершения отката обновить документацию проекта
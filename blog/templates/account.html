{% extends 'layout.html' %}

{% block content %}
<div class="account-page-wrapper">
  <!-- Background Elements -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
  </div>

  <div class="container account-container">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <div class="title-section">
          <div class="icon-wrapper">
            <i class="fas fa-user-cog"></i>
            <div class="icon-glow"></div>
          </div>
          <div class="title-content">
            <h1 class="page-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
            <p class="page-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
          </div>
          <div class="user-status-container">
            <div class="status-badge online">
              <div class="status-dot"></div>
              <span class="status-text">Online</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Account Content -->
    <form
      method="POST"
      action="{{ url_for('users.account') }}"
      enctype="multipart/form-data"
      class="account-form"
    >
      {{ form.hidden_tag() }}

      <div class="account-grid">
        <!-- Profile Sidebar -->
        <div class="profile-sidebar">
          <div class="profile-card">
            <!-- Avatar Section -->
            <div class="avatar-section">
              <div class="avatar-container">
                <img
                  src="{{ image_file }}"
                  alt="–ê–≤–∞—Ç–∞—Ä {{ user.full_name }}"
                  class="profile-avatar"
                />
                <div class="avatar-overlay">
                  <i class="fas fa-camera"></i>
                </div>
                <div class="avatar-glow"></div>
              </div>

              <!-- Avatar Upload -->
              <div class="avatar-upload">
                <label for="pictureUpload" class="upload-label">
                  <i class="fas fa-upload"></i>
                  <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</span>
                </label>
                {{ form.picture(class="upload-input", id="pictureUpload") }}
                {% if form.picture.errors %}
                <div class="upload-errors">
                  {% for error in form.picture.errors %}
                  <span class="error-message">{{ error }}</span>
                  {% endfor %}
                </div>
                {% endif %}
              </div>

              {{ form.submit(class='update-btn') }}
            </div>

            <!-- User Info -->
            <div class="user-info">
              <h3 class="user-name">
                {% set names = user.full_name.split() %} {{ names[0] }} {{
                names[1][:1] }}.{{ names[-1][:1] if names|length > 2 else '' }}.
              </h3>
              <p class="user-role">{{ user.position or '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}</p>
              <div class="last-seen">
                <i class="fas fa-clock"></i>
                <span
                  >–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: {{ user.last_seen.strftime('%d.%m.%Y %H:%M')
                  if user.last_seen else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</span
                >
              </div>
            </div>

            <!-- Navigation -->
            <nav class="profile-navigation">
              <a href="{{ url_for('users.account') }}" class="nav-item active">
                <i class="fas fa-user-circle"></i>
                <span>–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è</span>
              </a>
              <a
                href="{{ url_for('users.user_posts', username=current_user.username) }}"
                class="nav-item"
              >
                <i class="fas fa-newspaper"></i>
                <span>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</span>
              </a>
              <a href="/my-issues" class="nav-item">
                <i class="fas fa-ticket-alt"></i>
                <span>–ú–æ–∏ –∑–∞—è–≤–∫–∏</span>
              </a>
              {% if current_user.is_redmine_user %}
              <a href="{{ url_for('tasks.my_tasks_page') }}" class="nav-item">
                <i class="fas fa-tasks"></i>
                <span>–ú–æ–∏ –∑–∞–¥–∞—á–∏</span>
              </a>
              {% endif %}
            </nav>
          </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
          <!-- Personal Information Card -->
          <div class="content-card">
            <div class="card-header">
              <div class="header-icon">
                <i class="fas fa-id-card"></i>
              </div>
              <div class="header-content">
                <h3 class="card-title">–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                <p class="card-subtitle">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ TEZ ERP</p>
              </div>
            </div>

            <div class="card-content">
              <div class="info-grid">
                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-user"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–ü–æ–ª–Ω–æ–µ –∏–º—è</span>
                    <span class="info-value">{{ user.full_name }}</span>
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">E-mail</span>
                    <a
                      href="mailto:{{ user.email }}"
                      class="info-value email-link"
                      >{{ user.email }}</a
                    >
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-at"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                    {{ form.username(class='info-input readonly-input',
                    readonly=True) }}
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-phone"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω</span>
                    <span class="info-value"
                      >{{ user.phone or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span
                    >
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-map-marker-alt"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–û—Ñ–∏—Å</span>
                    <span class="info-value"
                      >{{ user.office or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span
                    >
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-building"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ</span>
                    <span class="info-value"
                      >{{ user.department or '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span
                    >
                  </div>
                </div>

                <div class="info-item">
                  <div class="info-icon">
                    <i class="fas fa-briefcase"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</span>
                    <span class="info-value"
                      >{{ user.position or '–ù–µ —É–∫–∞–∑–∞–Ω–∞' }}</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Settings & Access Card -->
          <div class="content-card">
            <div class="card-header">
              <div class="header-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="header-content">
                <h3 class="card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–æ—Å—Ç—É–ø—ã</h3>
                <p class="card-subtitle">VPN, –ø–∞—Ä–æ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å–∏</p>
              </div>
            </div>

            <div class="card-content">
              <!-- VPN Status -->
              <div class="settings-item">
                <div class="setting-header">
                  <div class="setting-icon">
                    <i class="fas fa-network-wired"></i>
                  </div>
                  <div class="setting-content">
                    <label for="account-vpn-display" class="setting-label">VPN —Å—Ç–∞—Ç—É—Å</label>
                    <div class="vpn-status-container">
                      <input
                        type="text"
                        id="account-vpn-display"
                        class="vpn-input"
                        placeholder="–°—Ç–∞—Ç—É—Å VPN"
                        title="–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å VPN"
                        {% if user.vpn_end_date %}
                        value="–í–∫–ª—é—á–µ–Ω, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è {{ user.vpn_end_date }}"
                        {% elif user.vpn == 1 and not user.vpn_end_date %}
                        value="–í–∫–ª—é—á–µ–Ω, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è &lt;–î–∞—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞&gt;"
                        {% else %}
                        value="–í—ã–∫–ª—é—á–µ–Ω"
                        {% endif %}
                        readonly
                      />
                      <button
                        type="button"
                        id="update-vpn-date"
                        class="vpn-update-btn"
                        title="–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ VPN –∏ –¥–∞—Ç–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è"
                        data-tooltip="–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ VPN –∏ –¥–∞—Ç–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è"
                        aria-label="–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ VPN"
                      >
                        <i class="fas fa-sync-alt"></i>
                      </button>
                    </div>
                    <div
                      class="vpn-badge-container"
                      id="vpn-status-badge-container"
                    >
                      {% if user.vpn == 1 and user.vpn_end_date %}
                      <span class="status-badge active">
                        <i class="fas fa-shield-alt"></i>
                        –í–∫–ª—é—á–µ–Ω
                      </span>
                      <span class="status-info"
                        >–¥–æ {{ user.vpn_end_date }}</span
                      >
                      {% elif user.vpn == 1 and not user.vpn_end_date %}
                      <span class="status-badge warning">
                        <i class="fas fa-shield-alt"></i>
                        –í–∫–ª—é—á–µ–Ω
                      </span>
                      <span class="status-info">—Å—Ä–æ–∫ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω</span>
                      {% else %}
                      <span class="status-badge inactive">
                        <i class="fas fa-shield-alt"></i>
                        –í—ã–∫–ª—é—á–µ–Ω
                      </span>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>

              <!-- ERP Password -->
              <div class="settings-item">
                <div class="setting-header">
                  <div class="setting-icon">
                    <i class="fas fa-key"></i>
                  </div>
                  <div class="setting-content">
                    <label for="password-display" class="setting-label">–ü–∞—Ä–æ–ª—å TEZ ERP</label>
                    <div class="password-container">
                      <input
                        type="password"
                        id="password-display"
                        class="password-input"
                        value="{{ user_password_erp if user_password_erp else '' }}"
                        title="–ü–∞—Ä–æ–ª—å TEZ ERP"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                        readonly
                        />
                        <button
                          type="button"
                          id="togglePassword"
                          class="password-toggle-btn"
                          title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å"
                          {% if not user_password_erp %}disabled{% endif %}
                        >
                        <i id="eyeIcon" class="fas fa-eye"></i>
                      </button>
                      <button
                        type="button"
                        id="copyPassword"
                        class="password-copy-btn"
                        {% if not user_password_erp %}disabled{% endif %}
                      >
                        <i class="fas fa-copy"></i>
                        <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                      </button>
                    </div>
                    {% if not user_password_erp %}
                    <div class="password-status">
                      <small class="text-muted">
                        <i class="fas fa-info-circle"></i>
                        –ü–∞—Ä–æ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.
                      </small>
                      <button
                        type="button"
                        id="refreshPasswordBtn"
                        class="btn btn-sm btn-outline-primary mt-2"
                      >
                        <i class="fas fa-sync-alt"></i>
                        –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
                      </button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>

              <!-- Email Signature -->
              <div class="settings-item">
                <div class="setting-header">
                  <div class="setting-icon">
                    <i class="fas fa-signature"></i>
                  </div>
                  <div class="setting-content">
                    <span class="setting-label">Email –ø–æ–¥–ø–∏—Å—å</span>
                    <div class="signature-preview">
                      {{ email_signature_html|safe if email_signature_html else
                      "–ü–æ–¥–ø–∏—Å—å –Ω–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞." }}
                    </div>
                    <button
                      type="button"
                      id="copySignatureBtnAccount"
                      class="signature-copy-btn"
                    >
                      <i class="fas fa-copy"></i>
                      <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Polling Notifications -->
              <div class="settings-item notifications-system">
                <div class="setting-header">
                  <div class="setting-icon pulse-animation">
                    <i class="fas fa-satellite-dish"></i>
                  </div>
                  <div class="setting-content">
                    <span class="setting-label">üì° –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</span>
                    <div class="notification-controls">
                      <div
                        class="notification-status active-status"
                        id="polling-notification-status"
                      >
                        <div
                          class="status-indicator"
                          id="polling-status-indicator"
                        >
                          <div class="status-badge success-badge">
                            <i
                              id="pollingNotificationIcon"
                              class="fas fa-check-circle"
                            ></i>
                            <span id="pollingNotificationStatus"
                              >–ê–∫—Ç–∏–≤–Ω–∞ (Polling)</span
                            >
                          </div>
                          <div class="connection-indicator">
                            <span class="connection-dot"></span>
                            <span class="connection-text">–ü–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
                          </div>
                        </div>
                        <div
                          class="status-description"
                          id="polling-status-description"
                        >
                          <div class="description-main">
                            –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 30
                            —Å–µ–∫—É–Ω–¥
                          </div>
                          <div class="status-details">
                            <span class="detail-item">
                              <i class="fas fa-clock"></i>
                              –ò–Ω—Ç–µ—Ä–≤–∞–ª: 30 —Å–µ–∫
                            </span>
                            <span class="detail-item">
                              <i class="fas fa-volume-up"></i>
                              –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω
                            </span>
                            <span class="detail-item">
                              <i class="fas fa-bell"></i>
                              <span id="widget-status-text-detail">–í–∏–¥–∂–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω</span>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∏–¥–∂–µ—Ç–∞ -->
                    <div class="widget-toggle-control" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(226, 232, 240, 0.8);">
                      <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                          <i class="fas fa-bell" style="color: #2563eb; font-size: 1.125rem;"></i>
                          <div>
                            <div style="font-weight: 600; color: #1e293b; font-size: 0.95rem;">–í–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
                            <div style="font-size: 0.85rem; color: #64748b; margin-top: 0.25rem;">
                              –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
                            </div>
                          </div>
                        </div>
                        <label class="toggle-switch" for="widgetToggle" style="margin: 0;">
                          <input
                            type="checkbox"
                            id="widgetToggle"
                            {% if current_user.notifications_widget_enabled %}checked{% endif %}
                            aria-label="–í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
                            title="–í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
                          />
                          <span class="toggle-slider"></span>
                        </label>
                      </div>
                      <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Å—Ç–∏–ª–µ detail-item -->
                      <div class="settings-link-wrapper">
                        <a
                          href="/notifications-polling"
                          target="_blank"
                          class="settings-link-item"
                        >
                          <i class="fas fa-cogs"></i>
                          <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions Card -->
          <div class="content-card">
            <div class="card-header">
              <div class="header-icon">
                <i class="fas fa-bolt"></i>
              </div>
              <div class="header-content">
                <h3 class="card-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <p class="card-subtitle">–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</p>
              </div>
            </div>

            <div class="card-content">
              <div class="actions-grid">
                <button
                  type="button"
                  id="downloadButton"
                  class="action-btn download-btn"
                >
                  <div class="btn-icon">
                    <i class="fas fa-download"></i>
                  </div>
                  <div class="btn-content">
                    <span class="btn-title">–°–∫–∞—á–∞—Ç—å TEZ ERP</span>
                    <span class="btn-description">–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è</span>
                  </div>
                  <div class="btn-ripple"></div>
                </button>

                <button
                  type="button"
                  id="sendPasswordButton"
                  class="action-btn password-btn"
                  data-username="{{ current_user.username }}"
                >
                  <div class="btn-icon">
                    <i class="fas fa-envelope-open-text"></i>
                  </div>
                  <div class="btn-content">
                    <span class="btn-title">–í—ã—Å–ª–∞—Ç—å –ø–∞—Ä–æ–ª—å</span>
                    <span class="btn-description">–ü–æ—á—Ç–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</span>
                  </div>
                  <div class="btn-ripple"></div>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ - –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º -->
    <div class="interface-settings-panel">
      <div class="interface-card">
        <div class="card-header">
          <div class="header-icon">
            <i class="fas fa-cogs"></i>
          </div>
          <div class="header-content">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h3>
            <p>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫</p>
          </div>
        </div>

        <div class="card-content">
          <div class="settings-section">
            <div class="section-header">
              <span>–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –ø–æ–º–æ—â—å</span>
            </div>
            <div class="notification-settings">
              <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∫–∞–∑–∞ –±–∞–Ω–Ω–µ—Ä–∞ Kanban -->
              <div class="notification-item">
                <div class="notification-info">
                  <div class="notification-icon">
                    <i class="fas fa-lightbulb"></i>
                  </div>
                  <div class="notification-details">
                    <span class="notification-title">–ü–æ–¥—Å–∫–∞–∑–∫–∏ Kanban</span>
                    <span class="notification-description"
                      >–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                      –∑–∞–¥–∞—á</span
                    >
                  </div>
                </div>
                <div class="notification-toggle">
                  <label class="toggle-switch" for="kanbanTipsToggle" title="–í–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ Kanban">
                    <input
                      type="checkbox"
                      class="notification-toggle"
                      id="kanbanTipsToggle"
                      data-type="kanban_tips"
                      {% if current_user.show_kanban_tips %}checked{% endif %}
                      aria-label="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞—á"
                    >
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Admin Panel - Moved to bottom -->
    {% if current_user.is_admin %}
    <div class="admin-panel-bottom">
      <div class="admin-card-bottom">
        <div class="card-header accordion-header" id="adminPanelHeader" role="button" tabindex="0" aria-expanded="true" aria-controls="adminPanelContent">
          <div class="header-icon">
            <i class="fas fa-user-shield"></i>
          </div>
          <div class="header-content">
            <h3 class="card-title">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <p class="card-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</p>
          </div>
          <div class="accordion-icon">
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>

        <div class="card-content accordion-content" id="adminPanelContent">
          <div class="admin-sections-grid">
            <!-- –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ -->
            <div class="admin-section">
              <div class="section-header">
                <span>–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞</span>
              </div>
              <div class="users-list">
                {% for u_admin in all_users %}
                <div class="user-item">
                  <div class="user-info">
                    <div class="user-avatar-small">
                      <img
                        src="{{ url_for('static', filename='profile_pics/' + u_admin.username + '/account_img/' + u_admin.image_file) }}"
                        alt="{{ u_admin.username }}"
                      />
                    </div>
                    <span class="user-name">{{ u_admin.username }}</span>
                  </div>
                  <div class="user-toggle">
                    <label class="toggle-switch" for="quality_control_toggle_{{ u_admin.id }}">
                      <input
                        type="checkbox"
                        class="permission-toggle"
                        id="quality_control_toggle_{{ u_admin.id }}"
                        name="quality_control_toggle_{{ u_admin.id }}"
                        data-user-id="{{ u_admin.id }}"
                        data-type="quality_control"
                        aria-label="–î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ u_admin.username }}"
                        title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç—Ä–æ–ª—é –∫–∞—á–µ—Å—Ç–≤–∞"
                        {% if u_admin.can_access_quality_control %}checked{% endif %}
                      />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>

            <!-- –ö–æ–Ω—Ç–∞–∫—Ç-—Ü–µ–Ω—Ç—Ä –ú–æ—Å–∫–≤–∞ -->
            <div class="admin-section">
              <div class="section-header">
                <span>–ö–æ–Ω—Ç–∞–∫—Ç-—Ü–µ–Ω—Ç—Ä –ú–æ—Å–∫–≤–∞</span>
              </div>
              <div class="users-list">
                {% for u_admin in all_users %}
                <div class="user-item">
                  <div class="user-info">
                    <div class="user-avatar-small">
                      <img
                        src="{{ url_for('static', filename='profile_pics/' + u_admin.username + '/account_img/' + u_admin.image_file) }}"
                        alt="{{ u_admin.username }}"
                      />
                    </div>
                    <span class="user-name">{{ u_admin.username }}</span>
                  </div>
                  <div class="user-toggle">
                    <label class="toggle-switch" for="contact_center_moscow_toggle_{{ u_admin.id }}">
                      <input
                        type="checkbox"
                        class="permission-toggle"
                        id="contact_center_moscow_toggle_{{ u_admin.id }}"
                        name="contact_center_moscow_toggle_{{ u_admin.id }}"
                        data-user-id="{{ u_admin.id }}"
                        data-type="contact_center_moscow"
                        aria-label="–î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç-—Ü–µ–Ω—Ç—Ä –ú–æ—Å–∫–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ u_admin.username }}"
                        title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç–∞–∫—Ç-—Ü–µ–Ω—Ç—Ä—É –ú–æ—Å–∫–≤–∞"
                        {% if u_admin.can_access_contact_center_moscow %}checked{% endif %}
                      />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>

            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <div class="admin-section">
              <div class="section-header">
                <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              </div>
              <div class="notification-settings">
                <div class="notification-item">
                  <div class="notification-info">
                    <div class="notification-icon">
                      <i class="fas fa-bell"></i>
                    </div>
                    <div class="notification-details">
                      <span class="notification-title">–û –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö</span>
                      <span class="notification-description"
                        >–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö –≤ Redmine</span
                      >
                    </div>
                  </div>
                  <div class="notification-toggle">
                    <label class="toggle-switch" for="newIssuesNotifications">
                      <input
                        type="checkbox"
                        class="notification-toggle"
                        id="newIssuesNotifications"
                        name="newIssuesNotifications"
                        data-type="new_issues_notifications"
                        aria-label="–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö"
                        title="–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö"
                      />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>

                <!-- –ü–†–ò–ú–ï–ß–ê–ù–ò–ï: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ "–ü–æ–¥—Å–∫–∞–∑–∫–∏ Kanban" –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞" –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block styles %}
<style>
  /* Import Modern Fonts */
  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&display=swap");

  /* CSS Custom Properties - DARK THEME –¥–ª—è account —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
  .account-page-wrapper {
    /* TEZ TOUR Brand Colors - Dark Mode */
    --primary-50: #0a1f23;
    --primary-100: #0d2833;
    --primary-200: #103442;
    --primary-300: #144152;
    --primary-400: #1a5563;
    --primary-500: #00bcd4;
    --primary-600: #00acc1;
    --primary-700: #0097a7;
    --primary-800: #00838f;
    --primary-900: #006064;

    /* Status Colors - Dark Mode */
    --success: #4ade80;
    --success-bg: rgba(74, 222, 128, 0.1);
    --error: #f87171;
    --error-bg: rgba(248, 113, 113, 0.1);
    --warning: #fbbf24;
    --warning-bg: rgba(251, 191, 36, 0.1);
    --info: #60a5fa;
    --online: #4ade80;

    /* Surface Colors - Dark Mode */
    --surface-0: #0a0f14;
    --surface-1: #111922;
    --surface-2: #1a2332;
    --surface-3: #242d3d;
    --surface-glass: rgba(17, 25, 34, 0.95);
    --surface-card: rgba(26, 35, 50, 0.9);

    /* Text Colors - Dark Mode */
    --text-primary: #e2e8f0;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;
    --text-disabled: #475569;
    --text-on-primary: #0a0f14;

    /* Border & Effects - Dark Mode */
    --border-light: rgba(100, 116, 139, 0.2);
    --border-medium: rgba(100, 116, 139, 0.3);
    --border-focus: var(--primary-500);

    /* Shadows - Dark Mode */
    --shadow-1: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.5);
    --shadow-2: 0 3px 6px rgba(0, 0, 0, 0.4), 0 3px 6px rgba(0, 0, 0, 0.6);

    /* Notification System Colors - Dark Mode */
    --notification-active: #4ade80;
    --notification-inactive: #f87171;
    --notification-bg: rgba(74, 222, 128, 0.05);
    --notification-border: rgba(74, 222, 128, 0.2);
    --shadow-3: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.7);
    --shadow-card: 0 8px 25px rgba(0, 188, 212, 0.15);
    --shadow-header: 0 4px 20px rgba(0, 188, 212, 0.2);

    /* Spacing */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-xxl: 3rem;

    /* Border Radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-xxl: 24px;

    /* Transitions */
    --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

    /* Typography */
    --font-family-primary: "Inter", -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, sans-serif;
    --font-family-mono: "JetBrains Mono", "Courier New", monospace;
  }

  /* Light Theme Variables Override */
  body:not(.dark-theme) .account-page-wrapper {
    /* TEZ TOUR Brand Colors - Light Mode */
    --primary-50: #f0f9ff;
    --primary-100: #e0f2fe;
    --primary-200: #bae6fd;
    --primary-300: #7dd3fc;
    --primary-400: #38bdf8;
    --primary-500: #0ea5e9;
    --primary-600: #0284c7;
    --primary-700: #0369a1;
    --primary-800: #075985;
    --primary-900: #0c4a6e;

    /* Status Colors - Light Mode */
    --success: #059669;
    --success-bg: rgba(5, 150, 105, 0.1);
    --error: #dc2626;
    --error-bg: rgba(220, 38, 38, 0.1);
    --warning: #d97706;
    --warning-bg: rgba(217, 119, 6, 0.1);
    --info: #2563eb;
    --online: #059669;

    /* Surface Colors - Light Mode */
    --surface-0: #ffffff;
    --surface-1: #f8fafc;
    --surface-2: #f1f5f9;
    --surface-3: #e2e8f0;
    --surface-glass: rgba(255, 255, 255, 0.95);
    --surface-card: rgba(255, 255, 255, 0.9);

    /* Text Colors - Light Mode */
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-muted: #64748b;
    --text-disabled: #94a3b8;
    --text-on-primary: #ffffff;

    /* Border & Effects - Light Mode */
    --border-light: rgba(148, 163, 184, 0.2);
    --border-medium: rgba(148, 163, 184, 0.3);
    --border-focus: var(--primary-500);

    /* Shadows - Light Mode */
    --shadow-1: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    --shadow-2: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
    --shadow-3: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    --shadow-card: 0 8px 25px rgba(14, 165, 233, 0.15);
    --shadow-header: 0 4px 20px rgba(14, 165, 233, 0.2);

    /* Notification System Colors - Light Mode */
    --notification-active: #059669;
    --notification-inactive: #dc2626;
    --notification-bg: rgba(5, 150, 105, 0.05);
    --notification-border: rgba(5, 150, 105, 0.2);
  }

  /* Base Styles - —Ç–æ–ª—å–∫–æ –¥–ª—è account —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
  .account-page-wrapper {
    font-family: var(--font-family-primary);
    background: linear-gradient(135deg, #0a0f14 0%, #111922 100%);
    min-height: 100vh;
    padding: var(--spacing-md) 0;
    position: relative;
    overflow: hidden;
    transition: all var(--transition-normal);
  }

  /* Light Theme Base Styles */
  body:not(.dark-theme) .account-page-wrapper {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  }

  /* Background Shapes */
  .account-page-wrapper .background-shapes {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  .account-page-wrapper .shape {
    position: absolute;
    background: rgba(0, 188, 212, 0.08);
    border-radius: 50%;
    animation: float 15s ease-in-out infinite;
    filter: blur(40px);
    transition: all var(--transition-normal);
  }

  /* Light Theme Background Shapes */
  body:not(.dark-theme) .account-page-wrapper .shape {
    background: rgba(14, 165, 233, 0.06);
  }

  .account-page-wrapper .shape-1 {
    width: 400px;
    height: 400px;
    top: 10%;
    left: -10%;
    animation-delay: 0s;
  }

  .account-page-wrapper .shape-2 {
    width: 300px;
    height: 300px;
    top: 60%;
    right: -5%;
    animation-delay: 5s;
  }

  .account-page-wrapper .shape-3 {
    width: 250px;
    height: 250px;
    bottom: 10%;
    left: 20%;
    animation-delay: 10s;
  }

  .account-page-wrapper .shape-4 {
    width: 200px;
    height: 200px;
    top: 30%;
    right: 15%;
    animation-delay: 15s;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    33% {
      transform: translateY(-30px) rotate(5deg);
    }
    66% {
      transform: translateY(15px) rotate(-5deg);
    }
  }

  /* Container */
  .account-page-wrapper .account-container {
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
    padding: 0 var(--spacing-lg);
  }

  /* Page Header */
  .account-page-wrapper .page-header {
    background: var(--surface-glass);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-header);
    padding: var(--spacing-md) var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
    animation: slideDown 0.8s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .account-page-wrapper .header-content {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
  }

  .account-page-wrapper .title-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
  }

  .account-page-wrapper .icon-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-500), var(--primary-400));
    border-radius: var(--radius-lg);
    color: var(--text-on-primary);
    font-size: 1.25rem;
    box-shadow: var(--shadow-2);
    z-index: 2;
  }

  .account-page-wrapper .icon-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 130%;
    height: 130%;
    background: radial-gradient(
      circle,
      rgba(0, 121, 140, 0.3) 0%,
      transparent 70%
    );
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: pulse 3s ease-in-out infinite;
    z-index: 1;
  }

  @keyframes pulse {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.6;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0.8;
    }
  }

  .account-page-wrapper .title-content {
    flex: 1;
  }

  .account-page-wrapper .page-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    letter-spacing: -0.025em;
    line-height: 1.2;
  }

  .account-page-wrapper .page-subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin: 0;
    font-weight: 400;
  }

  .account-page-wrapper .user-status-container {
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    justify-content: flex-start;
    /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    align-content: center;
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
    flex-wrap: nowrap;
    min-height: 40px;
  }

  .account-page-wrapper .status-badge.online {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-xs) !important;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    background: var(--success-bg) !important;
    border: 1px solid var(--online) !important;
    border-radius: var(--radius-lg) !important;
    color: var(--online) !important;
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    height: 40px !important; /* –¢–æ—á–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–∞–∫ —É –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–µ–º—ã */
    box-sizing: border-box !important; /* –í–∫–ª—é—á–∞–µ–º padding –∏ border –≤ –æ–±—â—É—é –≤—ã—Å–æ—Ç—É */
    align-self: center !important; /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    text-transform: none !important; /* –û—Ç–∫–ª—é—á–∞–µ–º uppercase –∏–∑ –æ–±—â–µ–≥–æ —Å—Ç–∏–ª—è */
    letter-spacing: normal !important; /* –û—Ç–∫–ª—é—á–∞–µ–º letter-spacing –∏–∑ –æ–±—â–µ–≥–æ —Å—Ç–∏–ª—è */
    margin-bottom: 0 !important; /* –û—Ç–∫–ª—é—á–∞–µ–º margin-bottom –∏–∑ –æ–±—â–µ–≥–æ —Å—Ç–∏–ª—è */
    margin: 0 !important; /* –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã */
  }

  .account-page-wrapper .status-dot {
    width: 8px;
    height: 8px;
    background: var(--online);
    border-radius: 50%;
    animation: pulseOnline 2s ease-in-out infinite;
  }

  @keyframes pulseOnline {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.2);
      opacity: 0.8;
    }
  }

  /* Theme Switcher */
  .account-page-wrapper .theme-switcher-container {
    /* –û—Ç—Å—Ç—É–ø —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ gap –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ */
    align-self: center !important; /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    display: flex;
    align-items: center;
    height: 40px; /* –¢–æ—á–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    justify-content: center;
  }

  .account-page-wrapper .theme-switcher {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-md);
    color: #ffffff;
    cursor: pointer;
    padding: var(--spacing-sm);
    transition: all var(--transition-normal);
    -webkit-backdrop-filter: blur(10px); /* Safari Support */
    backdrop-filter: blur(10px);
    width: 40px !important;
    height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    position: relative;
    overflow: hidden;
    box-sizing: border-box !important; /* –í–∫–ª—é—á–∞–µ–º padding –∏ border –≤ –æ–±—â—É—é –≤—ã—Å–æ—Ç—É */
    align-self: center !important; /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    margin: 0 !important; /* –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã */
  }

  .account-page-wrapper .theme-switcher:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: var(--shadow-1);
  }

  /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∏–∫–æ–Ω–æ–∫ theme-switcher */
  .account-page-wrapper .theme-switcher i {
    font-size: 16px;
    transition: all var(--transition-normal);
    position: relative;
    z-index: 1;
  }

  /* –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∫–æ–Ω–æ–∫ theme-switcher */
  .account-page-wrapper .theme-switcher .fa-sun {
    display: none !important;
  }

  .account-page-wrapper .theme-switcher .fa-moon {
    display: inline-block !important;
  }

  body.dark-theme .account-page-wrapper .theme-switcher .fa-sun {
    display: inline-block !important;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    font-weight: 900;
  }

  body.dark-theme .account-page-wrapper .theme-switcher .fa-moon {
    display: none !important;
  }

  body.dark-theme .account-page-wrapper .theme-switcher:hover .fa-sun {
    color: #fbbf24;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    transform: scale(1.1);
  }

  /* –°—Ç–∏–ª–∏ –∏–∫–æ–Ω–æ–∫ –≤ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ */
  body:not(.dark-theme) .account-page-wrapper .theme-switcher {
    background: rgba(0, 0, 0, 0.08);
    border: 2px solid rgba(0, 0, 0, 0.25);
    color: rgba(0, 0, 0, 0.8);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  body:not(.dark-theme) .account-page-wrapper .theme-switcher:hover {
    background: rgba(0, 0, 0, 0.12);
    border-color: rgba(0, 0, 0, 0.4);
    color: rgba(0, 0, 0, 0.95);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    transform: translateY(-2px) scale(1.05);
  }

  body:not(.dark-theme) .account-page-wrapper .theme-switcher .fa-moon {
    display: inline-block !important;
    color: rgba(0, 0, 0, 0.8);
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
    font-weight: 900;
  }

  body:not(.dark-theme) .account-page-wrapper .theme-switcher:hover .fa-moon {
    color: rgba(0, 0, 0, 0.95);
    text-shadow: 0 1px 3px rgba(255, 255, 255, 0.7);
    transform: scale(1.1);
  }

  /* Account Grid */
  .account-page-wrapper .account-grid {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-lg);
    align-items: start;
  }

  /* Profile Sidebar */
  .account-page-wrapper .profile-card {
    background: var(--surface-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-card);
    position: sticky;
    top: 80px;
    text-align: center;
    animation: fadeInLeft 0.8s ease-out;
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .account-page-wrapper .avatar-section {
    margin-bottom: var(--spacing-md);
  }

  .account-page-wrapper .avatar-container {
    position: relative;
    display: inline-block;
    margin-bottom: var(--spacing-sm);
  }

  .account-page-wrapper .profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--surface-0);
    box-shadow: var(--shadow-2);
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .avatar-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 121, 140, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-on-primary);
    font-size: 1.125rem;
    opacity: 0;
    transition: all var(--transition-normal);
    cursor: pointer;
  }

  .account-page-wrapper .avatar-container:hover .avatar-overlay {
    opacity: 1;
  }

  .account-page-wrapper .avatar-container:hover .profile-avatar {
    transform: scale(1.05);
  }

  .account-page-wrapper .avatar-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120%;
    height: 120%;
    background: radial-gradient(
      circle,
      rgba(0, 121, 140, 0.2) 0%,
      transparent 70%
    );
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: avatarPulse 4s ease-in-out infinite;
    z-index: -1;
  }

  @keyframes avatarPulse {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.6;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.15);
      opacity: 0.8;
    }
  }

  .account-page-wrapper .avatar-upload {
    margin-bottom: var(--spacing-sm);
  }

  .account-page-wrapper .upload-label {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: 0.4rem 0.75rem;
    background: var(--surface-2);
    color: var(--text-secondary);
    border: 2px dashed var(--border-medium);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    font-size: 0.8rem;
    font-weight: 500;
  }

  .account-page-wrapper .upload-label:hover {
    background: var(--primary-50);
    color: var(--primary-700);
    border-color: var(--primary-300);
    transform: translateY(-2px);
  }

  .account-page-wrapper .upload-input {
    display: none;
  }

  .account-page-wrapper .upload-errors {
    margin-top: var(--spacing-sm);
  }

  .account-page-wrapper .error-message {
    display: block;
    font-size: 0.75rem;
    color: var(--error);
    font-weight: 500;
  }

  .account-page-wrapper .update-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    padding: 0.5rem 0.75rem;
    background: linear-gradient(135deg, var(--primary-500), var(--primary-400));
    border: none;
    border-radius: var(--radius-md);
    color: var(--text-on-primary);
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all var(--transition-normal);
    margin-bottom: var(--spacing-md);
  }

  .account-page-wrapper .update-btn:hover {
    background: linear-gradient(135deg, var(--primary-600), var(--primary-500));
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
  }

  .account-page-wrapper .user-info {
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-light);
    display: flex; /* –î–æ–±–∞–≤–ª–µ–Ω–æ */
    flex-direction: column; /* –î–æ–±–∞–≤–ª–µ–Ω–æ */
    align-items: center; /* –î–æ–±–∞–≤–ª–µ–Ω–æ */
    text-align: center; /* –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö */
  }

  .account-page-wrapper .user-name {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    line-height: 1.3;
  }

  .account-page-wrapper .user-role {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
    font-weight: 500;
  }

  .account-page-wrapper .last-seen {
    display: flex;
    align-items: center;
    justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */
    gap: 0.25rem; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞ */
    font-size: 0.75rem; /* –£–º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ */
    color: var(--text-muted);
    padding: 0.35rem 0.5rem; /* –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ */
    background: var(--surface-1); /* –õ–µ–≥–∫–∏–π —Ñ–æ–Ω */
    border-radius: var(--radius-sm); /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
    text-align: center; /* –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ flex –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç */
    width: 100%; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —Ä–æ–¥–∏—Ç–µ–ª—è */
    box-sizing: border-box; /* –ß—Ç–æ–±—ã padding –Ω–µ –≤–ª–∏—è–ª –Ω–∞ –æ–±—â—É—é —à–∏—Ä–∏–Ω—É */
    margin: 0 auto; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ (–µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç) */
    flex-wrap: wrap; /* –ü–æ–∑–≤–æ–ª—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
    min-height: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã—Å–æ—Ç–∞ */
  }

  .account-page-wrapper .last-seen i {
    flex-shrink: 0; /* –ò–∫–æ–Ω–∫–∞ –Ω–µ –±—É–¥–µ—Ç —Å–∂–∏–º–∞—Ç—å—Å—è */
    width: 12px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∏–∫–æ–Ω–∫–∏ */
    text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ */
  }

  .account-page-wrapper .last-seen span {
    white-space: normal; /* –¢–µ–∫—Å—Ç –º–æ–∂–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è */
    overflow: visible; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç */
    text-overflow: clip; /* –£–±–∏—Ä–∞–µ–º –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ */
    flex: 1; /* –¢–µ–∫—Å—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
    text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ span */
    word-break: break-word; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ */
    min-width: 0; /* –ü–æ–∑–≤–æ–ª—è–µ–º —Å–∂–∞—Ç–∏–µ */
  }

  .account-page-wrapper .profile-navigation {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .account-page-wrapper .nav-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 0.5rem 0.75rem;
    text-decoration: none;
    color: var(--text-secondary);
    border-radius: var(--radius-md);
    transition: all var(--transition-normal);
    font-weight: 500;
    font-size: 0.875rem;
  }

  .account-page-wrapper .nav-item:hover {
    background: var(--surface-2);
    color: var(--text-primary);
    transform: translateX(4px);
  }

  .account-page-wrapper .nav-item.active {
    background: linear-gradient(135deg, var(--primary-50), var(--primary-100));
    color: var(--primary-700);
    font-weight: 600;
  }

  .account-page-wrapper .nav-item i {
    width: 20px;
    text-align: center;
    opacity: 0.8;
  }

  /* Main Content */
  .account-page-wrapper .main-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    animation: fadeInUp 0.8s ease-out 0.2s both;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .account-page-wrapper .content-card {
    background: var(--surface-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-card);
    overflow: hidden;
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .content-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-3);
  }

  .account-page-wrapper .card-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(
      135deg,
      rgba(0, 188, 212, 0.1),
      rgba(0, 188, 212, 0.05)
    );
    border-bottom: 1px solid var(--border-light);
  }

  .account-page-wrapper .header-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--primary-500), var(--primary-400));
    border-radius: var(--radius-md);
    color: var(--text-on-primary);
    font-size: 1rem;
    box-shadow: var(--shadow-1);
  }

  .account-page-wrapper .card-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    line-height: 1.3;
  }

  .account-page-wrapper .card-subtitle {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 0;
  }

  .account-page-wrapper .card-content {
    padding: var(--spacing-lg);
  }

  /* Info Grid */
  .account-page-wrapper .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
  }

  .account-page-wrapper .info-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--surface-2);
    border-radius: var(--radius-md);
    transition: all var(--transition-normal);
    border: 1px solid var(--border-light);
  }

  .account-page-wrapper .info-item:hover {
    background: var(--surface-3);
    border-color: var(--primary-500);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 188, 212, 0.15);
  }

  .account-page-wrapper .info-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: rgba(0, 188, 212, 0.15);
    border: 1px solid rgba(0, 188, 212, 0.3);
    border-radius: var(--radius-md);
    color: var(--primary-600);
    font-size: 0.875rem;
    flex-shrink: 0;
  }

  .account-page-wrapper .info-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    min-width: 0;
  }

  .account-page-wrapper .info-label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .account-page-wrapper .info-value {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.4;
    word-break: break-word;
  }

  .account-page-wrapper .email-link {
    color: var(--primary-500);
    text-decoration: none;
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .email-link:hover {
    color: var(--primary-700);
    text-decoration: underline;
  }

  .account-page-wrapper .info-input {
    border: none;
    background: none;
    padding: 0;
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    width: 100%;
  }

  .account-page-wrapper .readonly-input {
    cursor: default;
  }

  /* Settings Items */
  .account-page-wrapper .settings-item {
    margin-bottom: var(--spacing-xxl);
  }

  .account-page-wrapper .settings-item:last-child {
    margin-bottom: 0;
  }

  .account-page-wrapper .setting-header {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-lg);
  }

  .account-page-wrapper .setting-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 45px;
    height: 45px;
    background: rgba(0, 188, 212, 0.15);
    border: 1px solid rgba(0, 188, 212, 0.3);
    border-radius: var(--radius-lg);
    color: var(--primary-600);
    font-size: 1.125rem;
    flex-shrink: 0;
    margin-top: var(--spacing-xs);
  }

  .account-page-wrapper .setting-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .account-page-wrapper .setting-label {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
  }

  /* VPN Status */
  .account-page-wrapper .vpn-status-container {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
  }

  .account-page-wrapper .vpn-input {
    flex: 1;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--surface-2);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    font-size: 0.9rem;
    color: var(--text-primary);
    font-family: var(--font-family-mono);
    height: 42px;
    box-sizing: border-box;
  }

  .account-page-wrapper .vpn-update-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    padding: 0;
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    border: none;
    border-radius: var(--radius-md);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
    flex-shrink: 0;
    box-sizing: border-box;
  }

  .account-page-wrapper .vpn-update-btn:hover {
    background: linear-gradient(135deg, #2563eb, #1d4ed8);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
  }

  .account-page-wrapper .vpn-update-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(37, 99, 235, 0.3);
  }

  .account-page-wrapper .vpn-update-btn i {
    font-size: 1rem;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .account-page-wrapper .vpn-update-btn:hover i {
    transform: rotate(180deg);
  }

  /* Tooltip —Å—Ç–∏–ª–∏ */
  .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: rgba(15, 23, 42, 0.95);
    color: white;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: var(--radius-md);
    white-space: nowrap;
    z-index: 1000;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    animation: tooltipFadeIn 0.2s ease-out;
  }

  .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 0.25rem;
    border: 5px solid transparent;
    border-top-color: rgba(15, 23, 42, 0.95);
    z-index: 1000;
    pointer-events: none;
    animation: tooltipFadeIn 0.2s ease-out;
  }

  @keyframes tooltipFadeIn {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è tooltip */
  body.dark-theme .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::after,
  html.dark-theme .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::after,
  [data-theme="dark"] .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::after {
    background: rgba(255, 255, 255, 0.95);
    color: rgba(15, 23, 42, 0.95);
  }

  body.dark-theme .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::before,
  html.dark-theme .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::before,
  [data-theme="dark"] .account-page-wrapper .vpn-update-btn[data-tooltip]:hover::before {
    border-top-color: rgba(255, 255, 255, 0.95);
  }

  .account-page-wrapper .vpn-badge-container {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
  }

  .account-page-wrapper .status-badge.active {
    background: var(--success-bg);
    color: var(--success);
    border: 1px solid var(--success);
  }

  .account-page-wrapper .status-badge.warning {
    background: var(--warning-bg);
    color: var(--warning);
    border: 1px solid var(--warning);
  }

  .account-page-wrapper .status-badge.inactive {
    background: var(--error-bg);
    color: var(--error);
    border: 1px solid var(--error);
  }

  .account-page-wrapper .status-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-lg);
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .account-page-wrapper .status-info {
    font-size: 0.875rem;
    color: var(--text-muted);
    font-weight: 500;
  }

  /* Password Container */
  .account-page-wrapper .password-container {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
  }

  .account-page-wrapper .password-input {
    flex: 1;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--surface-2);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    font-size: 0.9rem;
    color: var(--text-primary);
    font-family: var(--font-family-mono);
  }

  .account-page-wrapper .password-toggle-btn,
  .account-page-wrapper .password-copy-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--surface-3);
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all var(--transition-normal);
    white-space: nowrap;
  }

  .account-page-wrapper .password-toggle-btn:hover,
  .account-page-wrapper .password-copy-btn:hover:not(:disabled) {
    background: rgba(0, 188, 212, 0.2);
    color: var(--primary-500);
    border-color: var(--primary-500);
    transform: translateY(-1px);
  }

  .account-page-wrapper .password-copy-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Signature Preview */
  .account-page-wrapper .signature-preview {
    padding: var(--spacing-lg);
    background: var(--surface-2);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    margin-bottom: var(--spacing-md);
    max-height: 200px;
    overflow-y: auto;
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--text-secondary);
  }

  .account-page-wrapper .signature-copy-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, var(--primary-500), var(--primary-400));
    border: none;
    border-radius: var(--radius-lg);
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .signature-copy-btn:hover {
    background: linear-gradient(135deg, var(--primary-600), var(--primary-500));
    transform: translateY(-2px);
    box-shadow: var(--shadow-1);
  }

  /* Actions Grid - –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–≤–µ–ª–∏—á–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ */
  .account-page-wrapper .actions-grid {
    display: grid;
    grid-template-columns: repeat(
      auto-fit,
      minmax(250px, 1fr)
    ); /* –£–í–ï–õ–ò–ß–ï–ù–ê –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å 200px –¥–æ 250px –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ */
    gap: var(
      --spacing-lg
    ); /* –£–í–ï–õ–ò–ß–ï–ù –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ —Å md –¥–æ lg –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è */
    max-width: 600px; /* –£–í–ï–õ–ò–ß–ï–ù–ê –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å 450px –¥–æ 600px */
    justify-content: center; /* –î–û–ë–ê–í–õ–ï–ù–û: –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    align-items: stretch; /* –î–û–ë–ê–í–õ–ï–ù–û: –†–∞–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ */
  }

  .account-page-wrapper .action-btn {
    display: flex;
    align-items: center;
    gap: var(
      --spacing-lg
    ); /* –£–í–ï–õ–ò–ß–ï–ù –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å md –¥–æ lg –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è */
    padding: var(
      --spacing-lg
    ); /* –£–ú–ï–ù–¨–®–ï–ù –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å xl –¥–æ lg –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
    background: var(--surface-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
    text-align: left;
    min-height: 65px; /* –£–ú–ï–ù–¨–®–ï–ù–ê –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Å 100px –¥–æ 65px –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
    width: 100%; /* –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    box-sizing: border-box; /* –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ —Å —É—á–µ—Ç–æ–º padding –∏ border */
  }

  .account-page-wrapper .action-btn:hover {
    transform: translateY(
      -2px
    ); /* –£–º–µ–Ω—å—à–µ–Ω —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–¥–Ω—è—Ç–∏—è —Å -4px –¥–æ -2px –¥–ª—è –±–æ–ª–µ–µ –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
    box-shadow: var(--shadow-2);
    border-color: var(--primary-200);
  }

  /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
  @media (hover: none) and (pointer: coarse) {
    .account-page-wrapper .action-btn:hover {
      transform: none; /* –û—Ç–∫–ª—é—á–∞–µ–º hover-—ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    }

    .account-page-wrapper .action-btn:active {
      transform: scale(0.98); /* –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
      transition: transform 0.1s ease;
    }
  }

  .account-page-wrapper .download-btn {
    background: linear-gradient(
      135deg,
      rgba(74, 222, 128, 0.1),
      rgba(74, 222, 128, 0.05)
    );
    border-color: var(--success);
  }

  .account-page-wrapper .download-btn:hover {
    background: linear-gradient(135deg, var(--success), #22c55e);
    color: var(--text-on-primary);
  }

  .account-page-wrapper .password-btn {
    background: linear-gradient(
      135deg,
      rgba(251, 191, 36, 0.1),
      rgba(251, 191, 36, 0.05)
    );
    border-color: var(--warning);
  }

  .account-page-wrapper .password-btn:hover {
    background: linear-gradient(135deg, var(--warning), #f59e0b);
    color: var(--text-on-primary);
  }

  .account-page-wrapper .btn-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px; /* –£–í–ï–õ–ò–ß–ï–ù–ê —à–∏—Ä–∏–Ω–∞ –∏–∫–æ–Ω–∫–∏ —Å 40px –¥–æ 50px –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    height: 50px; /* –£–í–ï–õ–ò–ß–ï–ù–ê –≤—ã—Å–æ—Ç–∞ –∏–∫–æ–Ω–∫–∏ —Å 40px –¥–æ 50px –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    border-radius: var(--radius-lg);
    font-size: 1.4rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏–∫–æ–Ω–∫–∏ —Å 1.2rem –¥–æ 1.4rem –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ */
    flex-shrink: 0;
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .download-btn .btn-icon {
    background: var(--success);
    color: white;
  }

  .account-page-wrapper .password-btn .btn-icon {
    background: var(--warning);
    color: white;
  }

  .account-page-wrapper .btn-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(
      --spacing-sm
    ); /* –£–í–ï–õ–ò–ß–ï–ù –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å xs –¥–æ sm */
    justify-content: center; /* –î–û–ë–ê–í–õ–ï–ù–û: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
    min-width: 0; /* –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–∑–≤–æ–ª—è–µ—Ç flex-—ç–ª–µ–º–µ–Ω—Ç—É —Å–∂–∏–º–∞—Ç—å—Å—è –º–µ–Ω—å—à–µ —Å–≤–æ–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
  }

  .account-page-wrapper .btn-title {
    font-size: 1.125rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å 1rem –¥–æ 1.125rem –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
    font-weight: 600;
    color: var(--text-primary);
    transition: all var(--transition-normal);
    line-height: 1.4; /* –£–í–ï–õ–ò–ß–ï–ù–ê –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ —Å 1.3 –¥–æ 1.4 –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
    white-space: nowrap; /* –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
    overflow: hidden; /* –î–û–ë–ê–í–õ–ï–ù–û: –°–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è */
    text-overflow: ellipsis; /* –î–û–ë–ê–í–õ–ï–ù–û: –ú–Ω–æ–≥–æ—Ç–æ—á–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ */
  }

  .account-page-wrapper .btn-description {
    font-size: 0.875rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è —Å 0.8rem –¥–æ 0.875rem –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
    color: var(--text-secondary);
    transition: all var(--transition-normal);
    line-height: 1.3; /* –£–í–ï–õ–ò–ß–ï–ù–ê –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ —Å 1.2 –¥–æ 1.3 –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
    white-space: nowrap; /* –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
    overflow: hidden; /* –î–û–ë–ê–í–õ–ï–ù–û: –°–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è */
    text-overflow: ellipsis; /* –î–û–ë–ê–í–õ–ï–ù–û: –ú–Ω–æ–≥–æ—Ç–æ—á–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ */
  }

  .account-page-wrapper .action-btn:hover .btn-title,
  .account-page-wrapper .action-btn:hover .btn-description {
    color: white;
  }

  .account-page-wrapper .btn-ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    pointer-events: none;
  }

  /* Admin Panel */
  .account-page-wrapper .admin-card {
    background: var(--surface-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-card);
    position: sticky;
    top: 120px;
    animation: fadeInRight 0.8s ease-out 0.4s both;
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .account-page-wrapper .admin-table-container {
    max-height: 500px;
    overflow-y: auto;
  }

  .account-page-wrapper .table-header {
    padding: var(--spacing-md) 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: var(--spacing-md);
  }

  .account-page-wrapper .users-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .account-page-wrapper .user-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md);
    background: var(--surface-2);
    border-radius: var(--radius-lg);
    transition: all var(--transition-normal);
    border: 1px solid var(--border-light);
  }

  .account-page-wrapper .user-item:hover {
    background: var(--surface-3);
    transform: translateX(4px);
    border-color: var(--primary-500);
  }

  .account-page-wrapper .user-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
  }

  .account-page-wrapper .user-avatar-small {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--border-light);
  }

  .account-page-wrapper .user-avatar-small img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .account-page-wrapper .user-name {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-primary);
  }

  /* Toggle Switch */
  .account-page-wrapper .toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
  }

  .account-page-wrapper .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .account-page-wrapper .toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--surface-3);
    transition: var(--transition-normal);
    border-radius: 24px;
  }

  .account-page-wrapper .toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: var(--transition-normal);
    border-radius: 50%;
    box-shadow: var(--shadow-1);
  }

  .account-page-wrapper input:checked + .toggle-slider {
    background-color: var(--success);
  }

  .account-page-wrapper input:checked + .toggle-slider:before {
    transform: translateX(26px);
  }

  /* Notification Settings Styles */
  .account-page-wrapper .notification-settings {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .account-page-wrapper .notification-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    background: var(--surface-2);
    border-radius: var(--radius-lg);
    transition: all var(--transition-normal);
    border: 1px solid var(--border-light);
  }

  .account-page-wrapper .notification-item:hover {
    background: var(--surface-3);
    transform: translateX(4px);
    border-color: var(--primary-500);
  }

  .account-page-wrapper .notification-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
  }

  .account-page-wrapper .notification-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(0, 188, 212, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-600);
    font-size: 1rem;
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .notification-item:hover .notification-icon {
    background: rgba(0, 188, 212, 0.25);
    color: var(--primary-500);
    transform: scale(1.1);
  }

  .account-page-wrapper .notification-details {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .account-page-wrapper .notification-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
  }

  .account-page-wrapper .notification-description {
    font-size: 0.75rem;
    color: var(--text-secondary);
    line-height: 1.4;
  }

  .account-page-wrapper .notification-toggle {
    margin-left: var(--spacing-md);
  }

  /* Interface Settings Panel Styles */
  .account-page-wrapper .interface-settings-panel {
    margin-top: var(--spacing-xxl);
    animation: fadeInUp 0.8s ease-out 0.5s both;
  }

  .account-page-wrapper .interface-card {
    background: var(--surface-card);
    -webkit-backdrop-filter: blur(20px); /* Safari support */
    backdrop-filter: blur(20px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--shadow-card);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .account-page-wrapper .interface-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 35px rgba(0, 121, 140, 0.12);
  }

  .account-page-wrapper .interface-card .card-header {
    background: linear-gradient(
      135deg,
      rgba(0, 188, 212, 0.15),
      rgba(0, 188, 212, 0.08)
    );
    color: var(--text-primary);
    padding: var(--spacing-lg);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    border-bottom: 1px solid var(--border-light);
  }

  .account-page-wrapper .interface-card .header-icon {
    width: 50px;
    height: 50px;
    background: rgba(0, 188, 212, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    -webkit-backdrop-filter: blur(10px); /* Safari support */
    backdrop-filter: blur(10px);
  }

  .account-page-wrapper .interface-card .header-content h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 700;
  }

  .account-page-wrapper .interface-card .header-content p {
    margin: 0.25rem 0 0;
    opacity: 0.9;
    font-size: 0.9rem;
  }

  .account-page-wrapper .interface-card .card-content {
    padding: var(--spacing-lg);
  }

  .account-page-wrapper .settings-section {
    margin-bottom: var(--spacing-lg);
  }

  .account-page-wrapper .settings-section:last-child {
    margin-bottom: 0;
  }

  .account-page-wrapper .settings-section .section-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid rgba(0, 188, 212, 0.2);
  }

  .account-page-wrapper .settings-section .section-header span {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--primary-500);
  }

  /* Admin Panel Bottom Styles */
  .account-page-wrapper .admin-panel-bottom {
    margin-top: var(--spacing-xxl);
    animation: fadeInUp 0.8s ease-out 0.6s both;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .account-page-wrapper .admin-card-bottom {
    background: var(--surface-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-card);
    overflow: hidden;
  }

  /* Accordion Styles for Admin Panel */
  .account-page-wrapper .accordion-header {
    cursor: pointer;
    user-select: none;
    transition: all var(--transition-normal);
    justify-content: space-between;
    position: relative;
  }

  .account-page-wrapper .accordion-header .header-content {
    flex: 1;
  }

  .account-page-wrapper .accordion-header:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  .account-page-wrapper .accordion-header:focus {
    outline: 2px solid var(--primary-500);
    outline-offset: -2px;
    border-radius: var(--radius-xl);
  }

  .account-page-wrapper .accordion-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    color: var(--primary-500);
    transition: transform var(--transition-normal);
    flex-shrink: 0;
  }

  .account-page-wrapper .accordion-header[aria-expanded="false"] .accordion-icon {
    transform: rotate(-90deg);
  }

  .account-page-wrapper .accordion-header[aria-expanded="true"] .accordion-icon {
    transform: rotate(0deg);
  }

  .account-page-wrapper .accordion-content {
    max-height: 5000px;
    overflow: hidden;
    transition: max-height 0.4s ease-out, opacity 0.3s ease-out, padding 0.3s ease-out;
    opacity: 1;
  }

  .account-page-wrapper .accordion-header[aria-expanded="false"] + .accordion-content {
    max-height: 0;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
  }

  .account-page-wrapper .admin-sections-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--spacing-xl);
    padding: var(--spacing-xl);
  }

  .account-page-wrapper .admin-section {
    background: var(--surface-2);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    border: 1px solid var(--border-light);
    transition: all var(--transition-normal);
  }

  .account-page-wrapper .admin-section:hover {
    background: var(--surface-3);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 188, 212, 0.15);
  }

  .account-page-wrapper .section-header {
    padding: var(--spacing-md) 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: var(--spacing-md);
  }

  /* Responsive Design */
  @media (max-width: 1200px) {
    .account-page-wrapper .account-grid {
      grid-template-columns: 280px 1fr;
      gap: var(--spacing-xl);
    }
  }

  @media (max-width: 968px) {
    .account-page-wrapper .account-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-xl);
    }

    .account-page-wrapper .profile-card {
      position: static;
    }

    .account-page-wrapper .admin-sections-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-lg);
      padding: var(--spacing-lg);
    }

    .account-page-wrapper .admin-section {
      padding: var(--spacing-md);
    }

    .account-page-wrapper .account-container {
      padding: 0 var(--spacing-md);
    }

    .account-page-wrapper .page-header {
      padding: var(--spacing-lg) var(--spacing-xl);
    }

    .account-page-wrapper .header-content {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--spacing-lg);
    }

    .account-page-wrapper .user-status-container {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--spacing-md);
    }

    .account-page-wrapper .theme-switcher-container {
      margin-left: 0;
    }

    .account-page-wrapper .theme-switcher {
      width: 36px;
      height: 36px;
    }

    .account-page-wrapper .status-badge.online {
      height: 36px !important; /* –¢–æ—á–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–∞–∫ —É –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }

    .account-page-wrapper .info-grid {
      grid-template-columns: 1fr;
    }

    .account-page-wrapper .actions-grid {
      grid-template-columns: 1fr;
      max-width: none; /* –£–±–∏—Ä–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö */
    .account-page-wrapper .action-btn {
      min-height: 55px; /* –£–ú–ï–ù–¨–®–ï–ù–ê –≤—ã—Å–æ—Ç–∞ —Å 85px –¥–æ 55px –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      padding: var(
        --spacing-md
      ); /* –£–ú–ï–ù–¨–®–ï–ù padding —Å lg –¥–æ md –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      gap: var(--spacing-md); /* –£–º–µ–Ω—å—à–µ–Ω gap –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ */
    }

    .account-page-wrapper .btn-icon {
      width: 42px; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ —Å 36px –¥–æ 42px */
      height: 42px;
      font-size: 1.25rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ —Å 1.1rem –¥–æ 1.25rem */
    }

    .account-page-wrapper .btn-title {
      font-size: 1rem; /* –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
    }

    .account-page-wrapper .btn-description {
      font-size: 0.8rem; /* –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
    }
  }

  /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
  @media (max-width: 900px) and (min-width: 769px) {
    .account-page-wrapper .actions-grid {
      grid-template-columns: repeat(
        2,
        1fr
      ); /* –î–≤–µ –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
      max-width: 500px; /* –£–í–ï–õ–ò–ß–ï–ù–ê —à–∏—Ä–∏–Ω–∞ —Å 400px –¥–æ 500px –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
      gap: var(--spacing-md); /* –£–º–µ–Ω—å—à–µ–Ω –æ—Ç—Å—Ç—É–ø –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ */
    }

    .account-page-wrapper .admin-sections-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-lg);
    }

    .account-page-wrapper .action-btn {
      min-height: 60px; /* –£–ú–ï–ù–¨–®–ï–ù–ê –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Å 90px –¥–æ 60px –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      padding: var(--spacing-md); /* –£–º–µ–Ω—å—à–µ–Ω padding –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ */
    }

    .account-page-wrapper .btn-icon {
      width: 45px; /* –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
      height: 45px;
      font-size: 1.3rem;
    }
  }

  @media (max-width: 768px) {
    .account-page-wrapper .page-title {
      font-size: 2rem;
    }

    .account-page-wrapper .card-content {
      padding: var(--spacing-xl);
    }

    .account-page-wrapper .card-header {
      padding: var(--spacing-lg) var(--spacing-xl);
      flex-direction: column;
      text-align: center;
      gap: var(--spacing-md);
    }

    .account-page-wrapper .profile-avatar {
      width: 120px;
      height: 120px;
    }

    .account-page-wrapper .background-shapes {
      display: none;
    }

    .account-page-wrapper .vpn-status-container,
    .account-page-wrapper .password-container {
      flex-direction: column;
      align-items: stretch;
      gap: var(--spacing-md);
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .account-page-wrapper .action-btn {
      min-height: 50px; /* –£–ú–ï–ù–¨–®–ï–ù–ê –≤—ã—Å–æ—Ç–∞ —Å 75px –¥–æ 50px –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      padding: var(
        --spacing-sm
      ); /* –£–ú–ï–ù–¨–®–ï–ù padding —Å md –¥–æ sm –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      gap: var(--spacing-sm); /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    }

    .account-page-wrapper .btn-icon {
      width: 38px; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ —Å 32px –¥–æ 38px */
      height: 38px;
      font-size: 1.15rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ —Å 1rem –¥–æ 1.15rem */
    }

    .account-page-wrapper .btn-title {
      font-size: 0.95rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å 0.9rem –¥–æ 0.95rem */
      white-space: normal; /* –†–ê–ó–†–ï–®–ï–ù –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      overflow: visible; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç */
      text-overflow: initial; /* –£–±–∏—Ä–∞–µ–º –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ */
    }

    .account-page-wrapper .btn-description {
      font-size: 0.8rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è —Å 0.75rem –¥–æ 0.8rem */
      white-space: normal; /* –†–ê–ó–†–ï–®–ï–ù –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      overflow: visible; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç */
      text-overflow: initial; /* –£–±–∏—Ä–∞–µ–º –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ */
    }
  }

  @media (max-width: 480px) {
    .account-page-wrapper .page-header {
      padding: var(--spacing-md);
    }

    .account-page-wrapper .page-title {
      font-size: 1.75rem;
    }

    .account-page-wrapper .card-content {
      padding: var(--spacing-lg);
    }

    .account-page-wrapper .card-header {
      padding: var(--spacing-md);
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    .account-page-wrapper .actions-grid {
      gap: var(--spacing-sm); /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
      grid-template-columns: 1fr; /* –î–û–ë–ê–í–õ–ï–ù–û: –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    }

    .account-page-wrapper .action-btn {
      min-height: 45px; /* –£–ú–ï–ù–¨–®–ï–ù–ê –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Å 70px –¥–æ 45px –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      padding: var(--spacing-sm); /* –£–ú–ï–ù–¨–®–ï–ù padding —Å md –¥–æ sm –¥–ª—è –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ */
      gap: var(--spacing-sm); /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –æ—Ç—Å—Ç—É–ø */
    }

    .account-page-wrapper .btn-icon {
      width: 35px; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ —Å 28px –¥–æ 35px */
      height: 35px;
      font-size: 1.1rem; /* –£–í–ï–õ–ò–ß–ï–ù —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ —Å 0.9rem –¥–æ 1.1rem */
    }

    .account-page-wrapper .btn-title {
      font-size: 0.9rem; /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –Ω–æ —á–∏—Ç–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
      white-space: normal; /* –†–∞–∑—Ä–µ—à–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
      overflow: visible;
      text-overflow: initial;
    }

    .account-page-wrapper .btn-description {
      font-size: 0.75rem; /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è */
      white-space: normal; /* –†–∞–∑—Ä–µ—à–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
      overflow: visible;
      text-overflow: initial;
    }
  }

  /* High Contrast Mode */
  @media (prefers-contrast: high) {
    .account-page-wrapper {
      --border-light: #000000;
      --text-secondary: #000000;
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .account-page-wrapper * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Print Styles */
  @media print {
    .account-page-wrapper .background-shapes,
    .account-page-wrapper .avatar-glow,
    .account-page-wrapper .icon-glow {
      display: none !important;
    }

    .account-page-wrapper .content-card,
    .account-page-wrapper .profile-card,
    .account-page-wrapper .admin-card {
      box-shadow: none !important;
      border: 1px solid #ddd;
      page-break-inside: avoid;
    }

    .account-page-wrapper .action-btn {
      display: none;
    }
  }

  /* Browser Push Notifications Styles */
  .account-page-wrapper .notification-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-top: var(--spacing-md);
  }

  .account-page-wrapper .notification-status {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .account-page-wrapper .status-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 500;
  }

  .account-page-wrapper .status-indicator i {
    font-size: 0.75rem;
    transition: var(--transition-normal);
  }

  .account-page-wrapper .status-indicator.enabled i {
    color: var(--success);
    animation: pulseOnline 2s ease-in-out infinite;
  }

  .account-page-wrapper .status-indicator.disabled i {
    color: var(--error);
  }

  .account-page-wrapper .status-indicator.checking i {
    color: var(--warning);
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .account-page-wrapper .status-description {
    font-size: 0.875rem;
    color: var(--text-muted);
    line-height: 1.4;
  }

  .account-page-wrapper .notification-actions {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
  }

  .account-page-wrapper .notification-btn,
  .account-page-wrapper .notification-test-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-normal);
    text-decoration: none;
    white-space: nowrap;
  }

  .account-page-wrapper .notification-btn {
    background: var(--primary-500);
    color: var(--text-on-primary);
    box-shadow: var(--shadow-1);
  }

  .account-page-wrapper .notification-btn:hover:not(:disabled) {
    background: var(--primary-600);
    box-shadow: var(--shadow-2);
    transform: translateY(-1px);
  }

  .account-page-wrapper .notification-btn:disabled {
    background: var(--surface-3);
    color: var(--text-disabled);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .account-page-wrapper .notification-btn.enabled {
    background: var(--success);
  }

  .account-page-wrapper .notification-btn.enabled:hover:not(:disabled) {
    background: #059669;
  }

  .account-page-wrapper .notification-btn.disabled-state {
    background: var(--error);
  }

  .account-page-wrapper .notification-btn.disabled-state:hover:not(:disabled) {
    background: #dc2626;
  }

  .account-page-wrapper .notification-test-btn {
    background: var(--surface-3);
    color: var(--text-secondary);
    border: 1px solid var(--border-medium);
  }

  .account-page-wrapper .notification-test-btn:hover:not(:disabled) {
    background: rgba(0, 188, 212, 0.1);
    border-color: var(--primary-500);
    transform: translateY(-1px);
  }

  .account-page-wrapper .notification-test-btn:disabled {
    background: var(--surface-1);
    color: var(--text-disabled);
    border-color: var(--border-light);
    cursor: not-allowed;
    transform: none;
  }

  .account-page-wrapper .notification-info {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-2);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--primary-500);
  }

  .account-page-wrapper .notification-info .info-item {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    font-size: 0.875rem;
    line-height: 1.4;
  }

  .account-page-wrapper .notification-info .info-item:last-child {
    margin-bottom: 0;
  }

  .account-page-wrapper .notification-info .info-item i {
    color: var(--primary-500);
    margin-top: 2px;
    flex-shrink: 0;
  }

  .account-page-wrapper .notification-info .info-item span {
    color: var(--text-secondary);
  }

  /* Responsive adjustments for notifications */
  @media (max-width: 768px) {
    .account-page-wrapper .notification-actions {
      flex-direction: column;
    }

    .account-page-wrapper .notification-btn,
    .account-page-wrapper .notification-test-btn {
      justify-content: center;
      width: 100%;
    }
  }

  .account-page-wrapper .notification-test-btn:disabled {
    background: var(--surface-1);
    color: var(--text-disabled);
    border-color: var(--border-light);
    cursor: not-allowed;
    transform: none;
  }

  .account-page-wrapper .notification-debug-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--info);
    color: var(--text-on-primary);
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-normal);
    text-decoration: none;
    white-space: nowrap;
  }

  .account-page-wrapper .notification-debug-btn:hover:not(:disabled) {
    background: #2563eb;
    transform: translateY(-1px);
    box-shadow: var(--shadow-1);
  }

  .account-page-wrapper .notification-debug-btn:disabled {
    background: var(--surface-3);
    color: var(--text-disabled);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Clear notifications button */
  .account-page-wrapper .notification-clear-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #dc2626;
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-normal);
    text-decoration: none;
    white-space: nowrap;
  }

  .account-page-wrapper .notification-clear-btn:hover:not(:disabled) {
    background: #b91c1c;
    transform: translateY(-1px);
    box-shadow: var(--shadow-1);
  }

  .account-page-wrapper .notification-clear-btn:disabled {
    background: var(--surface-3);
    color: var(--text-disabled);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Enhanced Notification System Styles */
  .account-page-wrapper .notifications-system {
    background: linear-gradient(
      135deg,
      rgba(74, 222, 128, 0.05) 0%,
      var(--surface-2) 100%
    );
    border: 1px solid rgba(74, 222, 128, 0.2);
    border-radius: 12px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .account-page-wrapper .notifications-system::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(
      90deg,
      var(--notification-active) 0%,
      var(--primary-500) 100%
    );
    border-radius: 12px 12px 0 0;
  }

  .account-page-wrapper .notifications-system:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(34, 197, 94, 0.15);
  }

  .account-page-wrapper .pulse-animation {
    animation: pulse-glow 2s infinite;
  }

  @keyframes pulse-glow {
    0%,
    100% {
      transform: scale(1);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
    }
  }

  .account-page-wrapper .active-status {
    background: rgba(74, 222, 128, 0.08);
    border: 1px solid rgba(74, 222, 128, 0.25);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 0.5rem;
  }

  .account-page-wrapper .status-badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .account-page-wrapper .success-badge {
    color: var(--notification-active);
    font-weight: 600;
  }

  .account-page-wrapper .success-badge i {
    font-size: 1.1rem;
    animation: spin-success 2s linear infinite;
  }

  @keyframes spin-success {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .account-page-wrapper .connection-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
  }

  .account-page-wrapper .connection-dot {
    width: 8px;
    height: 8px;
    background: var(--notification-active);
    border-radius: 50%;
    animation: pulse-dot 1.5s infinite;
  }

  @keyframes pulse-dot {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(1.2);
    }
  }

  .account-page-wrapper .description-main {
    color: var(--text-primary);
    font-weight: 500;
    margin-bottom: 0.75rem;
    line-height: 1.4;
  }

  .account-page-wrapper .status-details {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .account-page-wrapper .detail-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
    background: rgba(0, 188, 212, 0.1);
    padding: 0.3rem 0.6rem;
    border-radius: 12px;
    border: 1px solid rgba(0, 188, 212, 0.2);
  }

  .account-page-wrapper .detail-item i {
    color: var(--notification-active);
  }

  .account-page-wrapper .action-buttons-group {
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }

  .account-page-wrapper .modern-settings-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    border: none;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    min-width: 100px;
  }

  /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –ï—â–µ –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
  .account-page-wrapper .modern-settings-btn.compact-btn {
    padding: 0.35rem 0.7rem;
    min-height: 28px;
    min-width: auto;
    font-size: 0.75rem;
    line-height: 1.2;
  }

  .account-page-wrapper .modern-settings-btn.compact-btn .btn-content {
    gap: 0.4rem;
  }

  .account-page-wrapper .modern-settings-btn.compact-btn i {
    font-size: 0.85rem;
  }

  .account-page-wrapper .modern-settings-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    transition: left 0.6s;
  }

  .account-page-wrapper .modern-settings-btn:hover::before {
    left: 100%;
  }

  .account-page-wrapper .primary-btn {
    background: linear-gradient(
      135deg,
      var(--primary-500) 0%,
      var(--primary-700) 100%
    );
    color: white;
    box-shadow: 0 2px 8px rgba(0, 121, 140, 0.3);
  }

  .account-page-wrapper .primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 121, 140, 0.4);
    color: white;
    text-decoration: none;
  }

  .account-page-wrapper .secondary-btn {
    background: rgba(100, 116, 139, 0.15);
    color: var(--text-secondary);
    border: 1px solid rgba(100, 116, 139, 0.3);
  }

  .account-page-wrapper .secondary-btn:hover {
    background: rgba(100, 116, 139, 0.25);
    color: var(--text-primary);
    transform: translateY(-1px);
    text-decoration: none;
  }

  .account-page-wrapper .danger-btn {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
  }

  .account-page-wrapper .danger-btn:hover {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    color: white;
    text-decoration: none;
  }

  .account-page-wrapper .danger-btn.disabled {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π */
    cursor: pointer !important;
    pointer-events: auto !important;
    opacity: 1 !important;
  }

  .account-page-wrapper .danger-btn.disabled:hover {
    background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
    box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
    transform: translateY(-2px);
  }

  .account-page-wrapper .btn-content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    z-index: 2;
  }

  .account-page-wrapper .btn-content i {
    font-size: 0.9rem;
  }

  /* Mobile responsiveness for notification system */
  @media (max-width: 768px) {
    .account-page-wrapper .status-details {
      flex-direction: column;
      gap: 0.5rem;
    }

    .account-page-wrapper .action-buttons-group {
      flex-direction: column;
      gap: 0.5rem;
    }

    .account-page-wrapper .modern-settings-btn {
      width: 100%;
      min-width: auto;
    }

    .account-page-wrapper .modern-settings-btn.compact-btn {
      padding: 0.4rem 0.8rem;
      min-height: 32px;
    }

    .account-page-wrapper .detail-item {
      flex: 1;
      justify-content: center;
    }
  }

  /* –ù–û–í–´–ï –°–¢–ò–õ–ò: –°–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
  .account-page-wrapper .notification-status.active-status .status-badge {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
  }

  .account-page-wrapper .notification-status.inactive-status .status-badge {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
  }

  .account-page-wrapper
    .notification-status.inactive-status
    .connection-indicator {
    opacity: 0.7;
  }

  .account-page-wrapper
    .notification-status.inactive-status
    .status-description {
    opacity: 0.8;
  }

  .account-page-wrapper .notification-status.inactive-status .connection-dot {
    background-color: #ef4444;
  }

  .account-page-wrapper .notification-status.inactive-status .connection-text {
    color: #ef4444;
  }

  .account-page-wrapper .notification-status.inactive-status .detail-item {
    opacity: 0.6;
  }

  .account-page-wrapper .connection-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #22c55e;
    display: inline-block;
    margin-right: 6px;
    transition: background-color 0.3s ease;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Å—Ç–∏–ª–µ detail-item */
  .account-page-wrapper .settings-link-wrapper {
    margin-top: 0.75rem;
    display: flex;
    justify-content: flex-end;
  }

  .account-page-wrapper .settings-link-item {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: #64748b;
    text-decoration: none;
    padding: 0.3rem 0.6rem;
    border-radius: 12px;
    background: rgba(0, 188, 212, 0.1);
    border: 1px solid rgba(0, 188, 212, 0.2);
    transition: all 0.2s ease;
  }

  .account-page-wrapper .settings-link-item:hover {
    background: rgba(0, 188, 212, 0.15);
    color: #007b8b;
    text-decoration: none;
  }

  .account-page-wrapper .settings-link-item i {
    font-size: 0.75rem;
    color: #00bcd4;
  }

  /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
  body.dark-theme .account-page-wrapper .settings-link-item,
  html.dark-theme .account-page-wrapper .settings-link-item,
  [data-theme="dark"] .account-page-wrapper .settings-link-item {
    color: #cbd5e1 !important;
    background: rgba(0, 188, 212, 0.15) !important;
    border-color: rgba(0, 188, 212, 0.3) !important;
  }

  body.dark-theme .account-page-wrapper .settings-link-item:hover,
  html.dark-theme .account-page-wrapper .settings-link-item:hover,
  [data-theme="dark"] .account-page-wrapper .settings-link-item:hover {
    background: rgba(0, 188, 212, 0.25) !important;
    color: #00bcd4 !important;
  }

  body.dark-theme .account-page-wrapper .settings-link-item i,
  html.dark-theme .account-page-wrapper .settings-link-item i,
  [data-theme="dark"] .account-page-wrapper .settings-link-item i {
    color: #00bcd4 !important;
  }
</style>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // === –ü–†–û–°–¢–û–ô –†–ê–ë–û–ß–ò–ô –°–ö–†–ò–ü–¢ –î–õ–Ø –ò–ö–û–ù–ö–ò –ì–õ–ê–ó–ê ===
    const togglePasswordBtn = document.getElementById("togglePassword");
    const passwordField = document.getElementById("password-display");
    const eyeIcon = document.getElementById("eyeIcon");

    if (togglePasswordBtn && passwordField && eyeIcon) {
      togglePasswordBtn.addEventListener("click", function () {
        if (passwordField.type === "password") {
          passwordField.type = "text";
          eyeIcon.classList.remove("fa-eye");
          eyeIcon.classList.add("fa-eye-slash");
        } else {
          passwordField.type = "password";
          eyeIcon.classList.remove("fa-eye-slash");
          eyeIcon.classList.add("fa-eye");
        }
      });
    }

    // === –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ü–ê–†–û–õ–Ø ===
    const copyPasswordBtn = document.getElementById('copyPassword');
    if (copyPasswordBtn && passwordField) {
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–∞—Ä–æ–ª—å
        if (passwordField.value && passwordField.value.trim() !== '') {
            copyPasswordBtn.disabled = false;
            copyPasswordBtn.classList.remove('disabled');
        } else {
            copyPasswordBtn.disabled = true;
            copyPasswordBtn.classList.add('disabled');
        }

        copyPasswordBtn.addEventListener('click', function() {
            if (passwordField.value && passwordField.value.trim() !== '') {
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(passwordField.value).then(function() {
                        Swal.fire('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!', '–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'success');
                    }).catch(function(err) {
                        fallbackCopyTextToClipboard(passwordField);
                    });
                } else {
                    fallbackCopyTextToClipboard(passwordField);
                }
            }
        });
    }

    // === –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ü–û–î–ü–ò–°–ò ===
    const copySignatureBtnAccount = document.getElementById('copySignatureBtnAccount');
    if (copySignatureBtnAccount) {
        copySignatureBtnAccount.addEventListener('click', function () {
            const signaturePreview = document.querySelector('.signature-preview');
            if (signaturePreview) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = signaturePreview.innerHTML;
                const plainText = signaturePreview.innerText || signaturePreview.textContent;

                navigator.clipboard.write([
                    new ClipboardItem({
                        'text/html': new Blob([tempDiv.innerHTML], { type: 'text/html' }),
                        'text/plain': new Blob([plainText], { type: 'text/plain' })
                    })
                ]).then(function () {
                    const originalText = copySignatureBtnAccount.innerHTML;
                    copySignatureBtnAccount.innerHTML = '<i class="fas fa-check me-2"></i>–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                    setTimeout(() => {
                        copySignatureBtnAccount.innerHTML = originalText;
                    }, 2000);
                }).catch(function (error) {
                    console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏: ', error);
                    Swal.fire('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.', 'error');
                });
            }
        });
    }

    // === –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–û: –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ===
    // const images = document.querySelectorAll('img');
    // images.forEach(img => {
    //     img.addEventListener('error', function() {
    //         if (!this.src.includes('default.jpg')) {
    //             this.src = "{{ url_for('static', filename='profile_pics/default.jpg') }}";
    //             this.classList.add('avatar-error');
    //         }
    //     });
    // });

    // === –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–û: RIPPLE EFFECT ===
    // const actionBtns = document.querySelectorAll('.action-btn');
    // actionBtns.forEach(btn => {
    //     btn.addEventListener('click', function(e) {
    //         createRipple(e, this);
    //     });
    // });

    // === –ü–†–û–°–¢–û–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö–ù–û–ü–ö–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–ô ===
    console.log("=== –ù–ê–ß–ê–õ–û –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò ===");

    // === –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–ö–ò "–°–ö–ê–ß–ê–¢–¨ TEZ ERP" ===
    const downloadButton = document.getElementById("downloadButton");
    if (downloadButton) {
      downloadButton.addEventListener("click", function () {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        const originalContent = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>';
        this.disabled = true;

        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
        const link = document.createElement("a");
        link.href = "/download_erp";
        link.download = "TEZERP.exe";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
        setTimeout(() => {
          this.innerHTML = originalContent;
          this.disabled = false;
        }, 2000);
      });
    }
    // === –ö–ù–û–ü–ö–ê "–û–¢–ö–õ–Æ–ß–ò–¢–¨ –í–°–Å" –£–î–ê–õ–ï–ù–ê - –§–£–ù–ö–¶–ò–û–ù–ê–õ –î–£–ë–õ–ò–†–û–í–ê–õ –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –í–ò–î–ñ–ï–¢–ê ===

    // === VPN: –∫–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å" ===
    const vpnUpdateBtn = document.getElementById("update-vpn-date");
    const vpnDisplay = document.getElementById("account-vpn-display");
    const vpnBadgeContainer = document.getElementById(
      "vpn-status-badge-container"
    );
    const csrfToken =
      document
        .querySelector('meta[name="csrf-token"]')
        ?.getAttribute("content") || "";

    function renderVpnBadges(vpnEndDate, changed) {
      if (!vpnBadgeContainer) return;
      if (vpnEndDate === null) {
        vpnBadgeContainer.innerHTML = `
                <span class="status-badge inactive">
                    <i class="fas fa-shield-alt"></i>
                    –í—ã–∫–ª—é—á–µ–Ω
                </span>`;
        return;
      }
      const isUndefined =
        typeof vpnEndDate === "string" &&
        vpnEndDate.toLowerCase().includes("–Ω–µ –æ–ø—Ä–µ–¥–µ–ª");
      // –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–µ–º –∫–ª–∞—Å—Å –±–µ–π–¥–∂–∞, –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞
      const currentHtml = vpnBadgeContainer.innerHTML;
      let baseBadge = currentHtml.match(
        /<span class=\"status-badge[^>]*>.*?<\/span>/s
      );
      baseBadge = baseBadge
        ? baseBadge[0]
        : `
            <span class="status-badge ${isUndefined ? "warning" : "active"}">
                <i class="fas fa-shield-alt"></i>
                –í–∫–ª—é—á–µ–Ω
            </span>`;

      const infoText = isUndefined ? "—Å—Ä–æ–∫ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω" : `–¥–æ ${vpnEndDate}`;
      vpnBadgeContainer.innerHTML = `${baseBadge}\n<span class="status-info">${infoText}</span>`;
    }

    if (vpnUpdateBtn && vpnDisplay) {
      vpnUpdateBtn.addEventListener("click", async () => {
        const original = vpnUpdateBtn.innerHTML;
        vpnUpdateBtn.disabled = true;
        vpnUpdateBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i><span style="margin-left:6px;">–û–±–Ω–æ–≤–ª—è–µ–º‚Ä¶</span>';
        try {
          const resp = await fetch("/update_vpn_date", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-Requested-With": "XMLHttpRequest",
              "X-CSRFToken": csrfToken,
            },
            body: "{}",
          });
          const data = await resp.json();
          const vpnEndDate = "vpn_end_date" in data ? data.vpn_end_date : null;
          if (vpnEndDate === null) {
            vpnDisplay.value = "–í—ã–∫–ª—é—á–µ–Ω";
          } else if (
            typeof vpnEndDate === "string" &&
            vpnEndDate.toLowerCase().includes("–Ω–µ –æ–ø—Ä–µ–¥–µ–ª")
          ) {
            vpnDisplay.value = "–í–∫–ª—é—á–µ–Ω, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è <–î–∞—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞>";
          } else {
            vpnDisplay.value = `–í–∫–ª—é—á–µ–Ω, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è ${vpnEndDate}`;
          }
          renderVpnBadges(vpnEndDate, data.message?.includes("–æ–±–Ω–æ–≤–ª–µ–Ω–∞"));
        } catch (e) {
          console.error("VPN update failed:", e);
        } finally {
          vpnUpdateBtn.disabled = false;
          vpnUpdateBtn.innerHTML = original;
        }
      });
    }
  });

  // === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
  function fallbackCopyTextToClipboard(inputElement) {
    const M_IOS =
      typeof navigator !== "undefined" &&
      /iPad|iPhone|iPod/.test(navigator.userAgent);
    if (M_IOS) {
      let range = document.createRange();
      range.selectNodeContents(inputElement);
      let selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      inputElement.setSelectionRange(0, 999999);
    } else {
      inputElement.select();
    }
    try {
      var successful = document.execCommand("copy");
      if (successful) {
        Swal.fire(
          "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!",
          "–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞",
          "success"
        );
      } else {
        Swal.fire("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å", "error");
      }
    } catch (err) {
      Swal.fire("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å", "error");
    }
    if (M_IOS) {
      window.getSelection().removeAllRanges();
    }
  }

  function createRipple(event, element) {
    const btn = element;
    const ripple = btn.querySelector(".btn-ripple");

    if (!ripple) return;

    const rect = btn.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = event.clientX - rect.left - size / 2;
    const y = event.clientY - rect.top - size / 2;

    ripple.style.width = ripple.style.height = size + "px";
    ripple.style.left = x + "px";
    ripple.style.top = y + "px";
    ripple.style.transform = "scale(0)";
    ripple.style.opacity = "1";

    requestAnimationFrame(() => {
      ripple.style.transform = "scale(2)";
      ripple.style.opacity = "0";
    });

    setTimeout(() => {
      ripple.style.transform = "scale(0)";
      ripple.style.opacity = "0";
    }, 600);
  }

  // === –§–£–ù–ö–¶–ò–Ø toggleNotificationsAndSound –£–î–ê–õ–ï–ù–ê - –ë–´–õ–ê –°–í–Ø–ó–ê–ù–ê –° –ö–ù–û–ü–ö–û–ô "–û–¢–ö–õ–Æ–ß–ò–¢–¨ –í–°–Å" ===

  function updateNotificationUI(enabled) {
    const notificationStatus = document.getElementById(
      "polling-notification-status"
    );
    const notificationIcon = document.getElementById("pollingNotificationIcon");
    const notificationStatusText = document.getElementById(
      "pollingNotificationStatus"
    );
    const statusBadge = document.querySelector(
      "#polling-status-indicator .status-badge"
    );
    const connectionDot = document.querySelector(".connection-dot");
    const connectionText = document.querySelector(".connection-text");
    if (enabled) {
      // –í–∫–ª—é—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      notificationStatus.className = "notification-status active-status";
      notificationStatus.setAttribute(
        "style",
        `
                background: #ecfdf5 !important;
                border: 2px solid #10b981 !important;
                color: #10b981 !important;
                padding: 10px !important;
                border-radius: 8px !important;
            `
      );

      if (notificationIcon) notificationIcon.className = "fas fa-check-circle";
      if (notificationStatusText)
        notificationStatusText.textContent = "–ê–∫—Ç–∏–≤–Ω–∞ (Polling)";
      if (statusBadge) {
        statusBadge.setAttribute(
          "style",
          `
                    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
                    color: white !important;
                `
        );
      }
      if (connectionDot)
        connectionDot.setAttribute(
          "style",
          "background-color: #10b981 !important;"
        );
      if (connectionText)
        connectionText.setAttribute("style", "color: #10b981 !important;");
    } else {
      // –û—Ç–∫–ª—é—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      notificationStatus.className = "notification-status inactive-status";
      notificationStatus.setAttribute(
        "style",
        `
                background: #fef2f2 !important;
                border: 2px solid #ef4444 !important;
                color: #ef4444 !important;
                padding: 10px !important;
                border-radius: 8px !important;
            `
      );

      if (notificationIcon) notificationIcon.className = "fas fa-bell-slash";
      if (notificationStatusText)
        notificationStatusText.textContent = "–û—Ç–∫–ª—é—á–µ–Ω–∞";
      if (statusBadge) {
        statusBadge.setAttribute(
          "style",
          `
                    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
                    color: white !important;
                `
        );
      }
      if (connectionDot)
        connectionDot.setAttribute(
          "style",
          "background-color: #ef4444 !important;"
        );
      if (connectionText)
        connectionText.setAttribute("style", "color: #ef4444 !important;");
    }
  }

  function showNotificationWidget() {
    const widget = document.querySelector(".modern-notifications-widget");
    if (widget) {
      widget.style.display = "block";
      widget.style.opacity = "1";
      widget.style.visibility = "visible";
    } else {
      // –ï—Å–ª–∏ –≤–∏–¥–∂–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–º–æ–∂–Ω–æ –æ–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑-–∑–∞ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      // –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç
      console.log("–í–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É...");
      window.location.reload();
    }
  }

  function hideNotificationWidget() {
    const widget = document.querySelector(".modern-notifications-widget");
    if (widget) {
      widget.style.display = "none";
      widget.style.opacity = "0";
      widget.style.visibility = "hidden";
    }
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  function toggleWidget(enabled) {
    console.log("–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞:", enabled);

    fetch("/api/notifications/toggle", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-CSRFToken": document.querySelector('meta[name="csrf-token"]')?.getAttribute("content") || "",
      },
      body: JSON.stringify({
        enabled: enabled,
      }),
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          console.log("–í–∏–¥–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω:", data.enabled);

          // –û–±–Ω–æ–≤–ª—è–µ–º localStorage –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≤–∏–¥–∂–µ—Ç–æ–º
          localStorage.setItem('notificationsWidgetDisabled', (!data.enabled).toString());

          // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
          const statusText = document.getElementById("widget-status-text-detail");
          if (statusText) {
            statusText.textContent = data.enabled ? "–í–∏–¥–∂–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω" : "–í–∏–¥–∂–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω";
          }

          // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥–∂–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
          if (data.enabled) {
            localStorage.removeItem('notificationsWidgetDisabled');
            showNotificationWidget();
          } else {
            localStorage.setItem('notificationsWidgetDisabled', 'true');
            hideNotificationWidget();
            // –£–≤–µ–¥–æ–º–ª—è–µ–º –≤–∏–¥–∂–µ—Ç –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            if (window.notificationsWidget) {
              window.notificationsWidget.widget.style.display = 'none';
              window.notificationsWidget.widget.classList.add('closed', 'initial-hidden');
              window.notificationsWidget.widget.style.visibility = 'hidden';
              window.notificationsWidget.widget.style.opacity = '0';
            }
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –≤–∏–¥–∂–µ—Ç –∏–∑ DOM
            setTimeout(() => {
              window.location.reload();
            }, 500);
          }

          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
          if (typeof Swal !== "undefined") {
            Swal.fire({
              icon: data.enabled ? "success" : "info",
              title: data.enabled ? "–í–∏–¥–∂–µ—Ç –≤–∫–ª—é—á–µ–Ω" : "–í–∏–¥–∂–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω",
              text: data.message || (data.enabled ? "–í–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è" : "–í–∏–¥–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–∫—Ä—ã—Ç"),
              timer: 2000,
              showConfirmButton: false,
            });
          }
        } else {
          console.error("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞:", data.error);
          // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
          const widgetToggle = document.getElementById("widgetToggle");
          if (widgetToggle) {
            widgetToggle.checked = !enabled;
          }

          if (typeof Swal !== "undefined") {
            Swal.fire({
              icon: "error",
              title: "–û—à–∏–±–∫–∞",
              text: data.error || "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç",
              timer: 3000,
            });
          }
        }
      })
      .catch((error) => {
        console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞:", error);
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        const widgetToggle = document.getElementById("widgetToggle");
        if (widgetToggle) {
          widgetToggle.checked = !enabled;
        }

        if (typeof Swal !== "undefined") {
          Swal.fire({
            icon: "error",
            title: "–û—à–∏–±–∫–∞",
            text: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
            timer: 3000,
          });
        }
      });
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  function loadNotificationStatus() {
    fetch("/api/notifications/status")
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          console.log("–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:", data.enabled);

          // –û–±–Ω–æ–≤–ª—è–µ–º UI –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–∑ –ë–î
          if (data.enabled) {
            updateNotificationUI(true);
            showNotificationWidget();
          } else {
            updateNotificationUI(false);
            hideNotificationWidget();
          }

          // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∏–¥–∂–µ—Ç–∞
          const widgetToggle = document.getElementById("widgetToggle");
          if (widgetToggle) {
            widgetToggle.checked = data.enabled;
          }

          // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
          const statusText = document.getElementById("widget-status-text-detail");
          if (statusText) {
            statusText.textContent = data.enabled ? "–í–∏–¥–∂–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω" : "–í–∏–¥–∂–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω";
          }

        } else {
          console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:", data.error);
        }
      })
      .catch((error) => {
        console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:", error);
      });
  }

  // === –ö–ù–û–ü–ö–ê "–û–¢–ö–õ–Æ–ß–ò–¢–¨ –í–°–Å" –£–î–ê–õ–ï–ù–ê - –§–£–ù–ö–¶–ò–û–ù–ê–õ –î–£–ë–õ–ò–†–û–í–ê–õ –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –í–ò–î–ñ–ï–¢–ê ===
  document.addEventListener("DOMContentLoaded", function () {

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –≤–∏–¥–∂–µ—Ç–∞
    const widgetToggle = document.getElementById("widgetToggle");
    if (widgetToggle) {
      widgetToggle.addEventListener("change", function (e) {
        const enabled = e.target.checked;
        toggleWidget(enabled);
      });
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    loadNotificationStatus();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ThemeManager –¥–ª—è account —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.accountThemeManager = new AccountThemeManager();

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è Kanban –ø–æ–¥—Å–∫–∞–∑–æ–∫
    const kanbanTipsToggle = document.getElementById("kanbanTipsToggle");
    if (kanbanTipsToggle) {
      kanbanTipsToggle.addEventListener("change", function (e) {
        const isEnabled = e.target.checked;

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        fetch("/api/user/kanban-tips-preference", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": document
              .querySelector("meta[name=csrf-token]")
              ?.getAttribute("content"),
          },
          body: JSON.stringify({
            show_kanban_tips: isEnabled,
          }),
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              console.log(
                "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kanban –ø–æ–¥—Å–∫–∞–∑–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:",
                isEnabled
              );

              // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
              window.showKanbanTips = isEnabled;

              // –£–ø—Ä–∞–≤–ª—è–µ–º tooltips –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
              if (isEnabled) {
                // –í–∫–ª—é—á–∞–µ–º tooltips –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
                if (typeof window.enableAllKanbanTooltips === "function") {
                  window.enableAllKanbanTooltips();
                }
              } else {
                // –û—Ç–∫–ª—é—á–∞–µ–º tooltips
                if (typeof window.disableAllKanbanTooltips === "function") {
                  window.disableAllKanbanTooltips();
                }
              }

              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
              const message = isEnabled
                ? "–ë–∞–Ω–Ω–µ—Ä —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞—á"
                : "–ë–∞–Ω–Ω–µ—Ä —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è";

              // –ò—Å–ø–æ–ª—å–∑—É–µ–º SweetAlert –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω, –∏–Ω–∞—á–µ –æ–±—ã—á–Ω—ã–π alert
              if (typeof Swal !== "undefined") {
                Swal.fire({
                  icon: "success",
                  title: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞",
                  text: message,
                  timer: 3000,
                  showConfirmButton: false,
                  toast: true,
                  position: "top-end",
                });
              } else {
                alert(message);
              }
            } else {
              console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:", data.error);
              // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
              e.target.checked = !isEnabled;
              alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
            }
          })
          .catch((error) => {
            console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:", error);
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            e.target.checked = !isEnabled;
            alert(
              "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É."
            );
          });
      });
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    const interfacePanel = document.querySelector(".interface-settings-panel");
    if (interfacePanel) {
      console.log("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π");
    }

    // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const pictureUpload = document.getElementById("pictureUpload");
    const profileAvatar = document.querySelector(".profile-avatar");

    if (pictureUpload && profileAvatar) {
      pictureUpload.addEventListener("change", function (e) {
        const file = e.target.files[0];
        if (file) {
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
          if (!file.type.startsWith("image/")) {
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPG –∏–ª–∏ PNG)");
            return;
          }

          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 5MB)
          if (file.size > 5 * 1024 * 1024) {
            alert("–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5MB");
            return;
          }

          // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
          const reader = new FileReader();
          reader.onload = function (e) {
            profileAvatar.src = e.target.result;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
            const avatarContainer = document.querySelector(".avatar-container");
            if (avatarContainer) {
              avatarContainer.style.transform = "scale(1.05)";
              setTimeout(() => {
                avatarContainer.style.transform = "scale(1)";
              }, 300);
            }
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // [DEBUG] –û—Ç–ª–∞–¥–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
    console.log("[AccountScript] –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω! –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é...");

    // Admin Panel Accordion Functionality
    const adminPanelHeader = document.getElementById("adminPanelHeader");
    const adminPanelContent = document.getElementById("adminPanelContent");

    if (adminPanelHeader && adminPanelContent) {
      // Toggle accordion on click
      adminPanelHeader.addEventListener("click", function() {
        const isExpanded = adminPanelHeader.getAttribute("aria-expanded") === "true";
        adminPanelHeader.setAttribute("aria-expanded", !isExpanded);
      });

      // Toggle accordion on Enter/Space key press
      adminPanelHeader.addEventListener("keydown", function(e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          const isExpanded = adminPanelHeader.getAttribute("aria-expanded") === "true";
          adminPanelHeader.setAttribute("aria-expanded", !isExpanded);
        }
      });
    }
  });

  // === THEME MANAGER –î–õ–Ø ACCOUNT –°–¢–†–ê–ù–ò–¶–´ ===
  class AccountThemeManager {
    constructor() {
      this.themeToggle = document.getElementById("theme-switcher");
      this.handleThemeChange = this.handleThemeChange.bind(this);
      this.init();
    }

    init() {
      const initialTheme = this.getCurrentTheme();
      this.handleThemeChange(initialTheme);

      if (this.themeToggle) {
        this.themeToggle.addEventListener("click", (event) => {
          event.preventDefault();
          if (window.themeManager && typeof window.themeManager.toggleTheme === "function") {
            window.themeManager.toggleTheme();
          } else {
            this.toggleThemeFallback();
          }
        });
      }

      window.addEventListener("themeChanged", (event) => {
        this.handleThemeChange(event.detail.theme);
      });
    }

    getCurrentTheme() {
      if (window.themeManager && typeof window.themeManager.getStoredTheme === "function") {
        return window.themeManager.getStoredTheme();
      }
      return document.documentElement.getAttribute("data-theme") ||
        (document.body.classList.contains("dark-theme") ? "dark" : "light");
    }

    handleThemeChange(theme) {
      this.updateToggleIcon(theme);
    }

    toggleThemeFallback() {
      const html = document.documentElement;
      const nextTheme = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
      html.setAttribute("data-theme", nextTheme);
      document.body.classList.toggle("dark-theme", nextTheme === "dark");
      document.body.classList.toggle("light-theme", nextTheme === "light");
      localStorage.setItem("site-theme", nextTheme);
      this.handleThemeChange(nextTheme);
    }

    updateToggleIcon(theme) {
      if (!this.themeToggle) {
        return;
      }

      this.themeToggle.title =
        theme === "dark" ? "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É" : "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É";
      this.themeToggle.setAttribute(
        "aria-label",
        theme === "dark" ? "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É" : "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É"
      );
    }
  }
</script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–∫–∏ "–í—ã—Å–ª–∞—Ç—å –ø–∞—Ä–æ–ª—å" -->
<script src="{{ url_for('static', filename='js/send_password.js') }}"></script>
{% endblock %}

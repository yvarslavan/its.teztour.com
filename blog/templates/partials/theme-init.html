{# 
  @file: theme-init.html
  @description: Inline script to prevent FOUC by applying theme before page render
  @usage: Include in <head> before any stylesheets
#}
<script>
(function() {
    'use strict';
    
    // Get theme from localStorage or system preference
    function getInitialTheme() {
        const stored = localStorage.getItem('site-theme');
        if (stored) return stored;
        
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return 'dark';
        }
        
        return 'light';
    }
    
    // Apply theme immediately (before page renders)
    const theme = getInitialTheme();
    const html = document.documentElement;
    
    // Set data-theme attribute (new system)
    html.setAttribute('data-theme', theme);
    
    // Add theme class (for compatibility with old system)
    html.classList.add(`${theme}-theme`);
    
    // Also add to body when it's available
    if (document.body) {
        document.body.classList.add(`${theme}-theme`);
    } else {
        document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.add(`${theme}-theme`);
        });
    }
})();
</script>

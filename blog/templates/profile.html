{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-4">
            <!-- Аватар и карточка пользователя -->
            <div class="card mb-4">
                <img src="{{ url_for('static', filename='profile_pics/' + user.username + '/' + 'account_img' + '/' + user.image_file) }}" class="card-img-top" alt="user_img">
                <div class="card-body" style="margin-bottom: 10px;">
                    <h5 class="card-title">{{ user.full_name }}</h5>
                    <p class="card-text">Последний вход: {{ user.last_seen.strftime('%d.%m.%Y %H:%M:%S') }}</p>
                    <p class="card-text" style="margin-top: -10px;">Созданные задачи: {{ count_issues }}</p>
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="account-full_name">Сотрудник</label>
                        <input class="form-control" type="text" id="account-full_name" value="{{ user.full_name }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="account-username">Имя пользователя</label>
                        <input class="form-control" type="email" id="account-username" value="{{ user.username }}" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="account-email">E-mail</label>
                        <a href="mailto:{{ user.email }}" class="form-control">{{ user.email }}</a>
                    </div>
                    <div class="form-group">
                        <label for="account-office">Локация</label>
                        <input class="form-control" type="text" id="account-office" value="{{ user.office }}" readonly>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="account-phone">Телефон</label>
                        <input class="form-control" type="text" id="account-phone" value="{{ user.phone }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="account-department">Подразделение</label>
                        <input class="form-control" type="text" id="account-department" value="{{ user.department }}" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="account-position">Должность</label>
                        <input class="form-control" type="text" id="account-position" value="{{ user.position }}" readonly>
                    </div>
                    <div class="form-group">
                        {% if user.vpn == 1 %}
                            {% set vpn_status = '✅ Включен, заканчивается ' + user.vpn_end_date %}
                        {% else %}
                            {% set vpn_status = '❌ Выключен' %}
                        {% endif %}
                        <label for="account-vpn">VPN</label>
                        <input class="form-control" type="text" id="account-vpn" value="{{ vpn_status }}" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

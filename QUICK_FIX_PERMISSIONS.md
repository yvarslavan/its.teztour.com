# üîß –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ê–í –î–û–°–¢–£–ü–ê

## üö® –ü–†–û–ë–õ–ï–ú–ê
Pipeline –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π: `‚ùå –ù–µ—Ç –ø—Ä–∞–≤ –∑–∞–ø–∏—Å–∏ –≤ /var/www/flask_helpdesk`

## ‚ö° –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
wget https://gitlab.teztour.com/y.varslavan/Tez_its_helpdesk/raw/main/fix_permissions.sh
chmod +x fix_permissions.sh
./fix_permissions.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh deploy@YOUR_SERVER_IP

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
sudo mkdir -p /var/www/flask_helpdesk
sudo chown deploy:www-data /var/www/flask_helpdesk
sudo chmod 775 /var/www/flask_helpdesk
sudo usermod -aG www-data deploy

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
ls -la /var/www/flask_helpdesk
groups deploy
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞

```bash
ssh deploy@YOUR_SERVER_IP "sudo mkdir -p /var/www/flask_helpdesk && sudo chown deploy:www-data /var/www/flask_helpdesk && sudo chmod 775 /var/www/flask_helpdesk && sudo usermod -aG www-data deploy"
```

## üîç –ü–†–û–í–ï–†–ö–ê

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏
ssh deploy@YOUR_SERVER_IP "touch /var/www/flask_helpdesk/test_file && rm /var/www/flask_helpdesk/test_file && echo '–ü—Ä–∞–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!'"
```

## üöÄ –ü–ï–†–ï–ó–ê–ü–£–°–ö –î–ï–ü–õ–û–Ø

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitLab CI/CD ‚Üí Pipelines
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π pipeline
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Retry" –¥–ª—è —ç—Ç–∞–ø–∞ `pre_deploy_checks`
4. –ò–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤—ã–π commit –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω–æ–≥–æ pipeline

## üí° –û–ë–™–Ø–°–ù–ï–ù–ò–ï

–ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `deploy` –Ω–µ –∏–º–µ–ª –ø—Ä–∞–≤ –∑–∞–ø–∏—Å–∏ –≤ `/var/www/flask_helpdesk`
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–∞ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ò–ª–∏ –Ω–µ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤–æ–≤—Å–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `deploy` - –≤–ª–∞–¥–µ–ª–µ—Ü –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ì—Ä—É–ø–ø–∞ `www-data` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –∑–∞–ø–∏—Å–∏
- ‚úÖ –ü—Ä–∞–≤–∞ `775` —Ä–∞–∑—Ä–µ—à–∞—é—Ç –∑–∞–ø–∏—Å—å –≤–ª–∞–¥–µ–ª—å—Ü—É –∏ –≥—Ä—É–ø–ø–µ

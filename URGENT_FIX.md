# üö® –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - Flask Helpdesk Deployment

## –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ GitLab CI/CD –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞:
1. **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞** (25GB –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100%)
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** flask_session —Ñ–∞–π–ª–æ–≤
3. **–ö–æ–º–∞–Ω–¥—ã sudo –≤ CI/CD** –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

## ‚ö° –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

### 1. –ö–†–ò–¢–ò–ß–ù–û: –û—á–∏—Å—Ç–∫–∞ –¥–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh yvarslavan@10.7.74.252

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
df -h

# –£–î–ê–õ–ï–ù–ò–ï –°–¢–ê–†–´–• –ë–≠–ö–ê–ü–û–í (–æ—Å–≤–æ–±–æ–¥–∏—Ç ~4.5GB)
sudo rm -rf /var/www/flask_helpdesk_backup_*

# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -rf /tmp/flask*
sudo rm -rf /var/log/*.log.*

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
df -h
```

### 2. –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cd /var/www/flask_helpdesk

# –û—á–∏—Å—Ç–∫–∞ flask_session (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã)
sudo rm -rf flask_session/*
sudo rm -rf __pycache__/

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
mkdir -p flask_session logs
sudo chown -R www-data:www-data flask_session logs
chmod 755 flask_session logs
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status flask-helpdesk

# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart flask-helpdesk
```

## üîÑ –ü–û–°–õ–ï –û–ß–ò–°–¢–ö–ò: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –¥–µ–ø–ª–æ–π

1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–≤–æ–±–æ–¥–Ω–æ >2GB –º–µ—Å—Ç–∞: `df -h`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ GitLab CI/CD
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
sudo systemctl restart flask-helpdesk
sudo chown -R www-data:www-data /var/www/flask_helpdesk/flask_session
sudo chown -R www-data:www-data /var/www/flask_helpdesk/logs
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo systemctl status flask-helpdesk

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u flask-helpdesk -f --lines=20

# –¢–µ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl -I https://its.tez-tour.com
```

## üõ†Ô∏è –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

1. **`.gitlab-ci.yml`** - —É–±—Ä–∞–Ω—ã sudo –∫–æ–º–∞–Ω–¥—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
2. **`scripts/server_cleanup.py`** - –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - `DEPLOYMENT_TROUBLESHOOTING.md` —Å –ø–æ–ª–Ω—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º

## üìû –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö:
- –û—Ç–∫–∞—Ç: `sudo mv flask_helpdesk_backup flask_helpdesk` (–µ—Å–ª–∏ –µ—Å—Ç—å –±—ç–∫–∞–ø)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤: `sudo journalctl -u flask-helpdesk -f`
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞: `sudo systemctl status flask-helpdesk`

---
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5-10 –º–∏–Ω—É—Ç
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –í–´–°–û–ö–ê–Ø - –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—á–∏–π CI/CD pipeline –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ

# Настройка локальной разработки на Windows 11 + WSL

## Проблема

Приложение работает на сервере, но локально не может подключиться к MySQL на `helpdesk.teztour.com` (таймаут).

**Причина**: Сервер MySQL находится во внутренней сети компании и недоступен напрямую с вашей локальной машины.

## Решения

### ✅ Решение 1: SSH туннель (РЕКОМЕНДУЕТСЯ)

Создайте SSH туннель для доступа к MySQL через сервер:

#### Шаг 1: Создайте SSH туннель

В отдельном терминале WSL выполните:

```bash
# Замените your_username на ваш SSH логин
ssh -L 3306:localhost:3306 your_username@helpdesk.teztour.com -N
```

**Важно**: 
- Оставьте этот терминал открытым
- `-N` означает "не выполнять команды, только туннель"
- Если MySQL на удаленном сервере не на localhost, замените на нужный хост

#### Шаг 2: Обновите .env для локальной разработки

Создайте файл `.env.local` (или временно измените `.env`):

```env
# Используем localhost через SSH туннель
MYSQL_HOST=localhost
MYSQL_DATABASE=your_database_name
MYSQL_USER=your_mysql_user
MYSQL_PASSWORD=your_mysql_password

# Остальные настройки остаются как есть
MYSQL_QUALITY_HOST=localhost
# ... и т.д.
```

#### Шаг 3: Запустите приложение

```bash
source venv/bin/activate
python3 app.py
```

---

### ✅ Решение 2: VPN подключение

Если у компании есть VPN:

1. Подключитесь к корпоративному VPN
2. Проверьте доступность:
   ```bash
   ping helpdesk.teztour.com
   telnet helpdesk.teztour.com 3306
   ```
3. Если доступен - используйте оригинальные настройки из `.env`

---

### ✅ Решение 3: Проверка доступности

Запустите скрипт проверки:

```bash
python3 test_mysql_connection.py
```

Это покажет, доступен ли сервер с вашей машины.

---

## Быстрая проверка

После настройки SSH туннеля проверьте подключение:

```bash
# В WSL терминале
mysql -h localhost -u your_mysql_user -p your_database_name
```

Если подключение успешно - всё настроено правильно!

---

## Автоматизация SSH туннеля

Можно создать systemd service для автоматического запуска туннеля, но для разработки проще запускать вручную.

---

## Примечания

- SSH туннель должен быть активен всё время работы приложения
- Если туннель разорвётся - перезапустите его
- Для продакшена используйте оригинальные настройки из `.env`

